# Forge æ¨¡å—åŠŸèƒ½è¯´æ˜æ–‡æ¡£

## æ¨¡å—æ¦‚è¿°

**Forge** æ˜¯ä¸€ä¸ª**ä½ä»£ç æ•°æ®å»ºæ¨¡ä¸è¡¨å•é…ç½®å¼•æ“**ï¼Œæä¾›é€šè¿‡å¯è§†åŒ–é…ç½®æ–¹å¼åŠ¨æ€åˆ›å»ºæ•°æ®åº“è¡¨ã€é…ç½®è¡¨å•å’Œå®ç°ä¸šåŠ¡é€»è¾‘çš„èƒ½åŠ›ã€‚æ— éœ€ç¼–å†™ä»£ç å³å¯å®ç°å®Œæ•´çš„æ•°æ®ç®¡ç†åŠŸèƒ½ã€‚

### æ ¸å¿ƒä»·å€¼

- ğŸš€ **å¿«é€Ÿå¼€å‘** - é€šè¿‡é…ç½®è€Œéç¼–ç ï¼Œå¤§å¹…ç¼©çŸ­å¼€å‘å‘¨æœŸ
- ğŸ”„ **çµæ´»å˜æ›´** - æ”¯æŒè¡¨ç»“æ„å’Œè¡¨å•åœ¨çº¿è°ƒæ•´ï¼Œæ— éœ€å‘ç‰ˆ
- ğŸ¨ **å¯è§†åŒ–é…ç½®** - æ‰€è§å³æ‰€å¾—çš„è¡¨å•è®¾è®¡ä½“éªŒ
- ğŸ”— **æ™ºèƒ½è”åŠ¨** - JavaScriptè„šæœ¬å®ç°å¤æ‚çš„å­—æ®µè”åŠ¨é€»è¾‘
- ğŸ“Š **æ•°æ®è¿½è¸ª** - å®Œæ•´çš„è¡¨ç»“æ„å˜æ›´å†å²è®°å½•

---

## åŠŸèƒ½æ¶æ„

```
Forge æ¨¡å—
â”œâ”€â”€ çŸ©é˜µç®¡ç† (Matrix Management)
â”‚   â”œâ”€â”€ çŸ©é˜µé…ç½® - å®šä¹‰æ•°æ®åº“è¡¨çš„å…ƒä¿¡æ¯
â”‚   â”œâ”€â”€ ç‰©ç†å»ºè¡¨ - æ ¹æ®é…ç½®åˆ›å»ºçœŸå®æ•°æ®åº“è¡¨
â”‚   â”œâ”€â”€ ç»“æ„åŒæ­¥ - è‡ªåŠ¨åŒæ­¥è¡¨ç»“æ„å˜æ›´
â”‚   â””â”€â”€ å˜æ›´è¿½è¸ª - è®°å½•æ‰€æœ‰DDLæ“ä½œå†å²
â”‚
â”œâ”€â”€ å­—æ®µé…ç½® (Column Configuration)
â”‚   â”œâ”€â”€ å­—æ®µå®šä¹‰ - é…ç½®å­—æ®µç±»å‹ã€é•¿åº¦ã€çº¦æŸ
â”‚   â”œâ”€â”€ ç´¢å¼•ç®¡ç† - é…ç½®æ™®é€šç´¢å¼•å’Œå”¯ä¸€ç´¢å¼•
â”‚   â”œâ”€â”€ é¡ºåºè°ƒæ•´ - çµæ´»è°ƒæ•´å­—æ®µåœ¨è¡¨ä¸­çš„ä½ç½®
â”‚   â””â”€â”€ æ•°æ®æ ¡éªŒ - åˆ é™¤å‰æ£€æŸ¥å­—æ®µæ˜¯å¦æœ‰æ•°æ®
â”‚
â”œâ”€â”€ è¡¨å•é…ç½® (Form Configuration)
â”‚   â”œâ”€â”€ å­—æ®µæ¸²æŸ“ - é…ç½®è¡¨å•å­—æ®µçš„å±•ç¤ºæ–¹å¼
â”‚   â”œâ”€â”€ éªŒè¯è§„åˆ™ - æ­£åˆ™è¡¨è¾¾å¼ã€èŒƒå›´ç­‰éªŒè¯
â”‚   â”œâ”€â”€ å¸ƒå±€è®¾è®¡ - å¯è§†åŒ–æ‹–æ‹½å¸ƒå±€
â”‚   â””â”€â”€ å­—æ®µå±æ€§ - å¿…å¡«ã€åªè¯»ã€é»˜è®¤å€¼ç­‰
â”‚
â”œâ”€â”€ è”åŠ¨é…ç½® (Linkage Configuration)
â”‚   â”œâ”€â”€ è§¦å‘æ¡ä»¶ - å®šä¹‰ä½•æ—¶è§¦å‘è”åŠ¨
â”‚   â”œâ”€â”€ è„šæœ¬æ‰§è¡Œ - JavaScriptè„šæœ¬è®¡ç®—é€»è¾‘
â”‚   â”œâ”€â”€ ç›®æ ‡æ›´æ–° - è‡ªåŠ¨æ›´æ–°å…³è”å­—æ®µ
â”‚   â””â”€â”€ ä¼˜å…ˆçº§ç®¡ç† - æ§åˆ¶å¤šä¸ªè”åŠ¨çš„æ‰§è¡Œé¡ºåº
â”‚
â””â”€â”€ æ•°æ®æ“ä½œ (Data Operation)
    â”œâ”€â”€ å¢åˆ æ”¹æŸ¥ - åŠ¨æ€è¡¨çš„æ ‡å‡†CRUDæ“ä½œ
    â”œâ”€â”€ æ¡ä»¶æŸ¥è¯¢ - çµæ´»çš„æ•°æ®ç­›é€‰
    â””â”€â”€ æ‰¹é‡æ“ä½œ - æ”¯æŒæ‰¹é‡æ•°æ®å¤„ç†
```

---

## æ ¸å¿ƒåŠŸèƒ½è¯¦è§£

### 1. çŸ©é˜µç®¡ç† (SysMatrix)

**åŠŸèƒ½æè¿°**ï¼šçŸ©é˜µæ˜¯åŠ¨æ€è¡¨çš„é…ç½®ä¸­å¿ƒï¼Œå®šä¹‰äº†æ•°æ®åº“è¡¨çš„æ‰€æœ‰å…ƒä¿¡æ¯ã€‚

#### 1.1 ä¸»è¦èƒ½åŠ›

| èƒ½åŠ› | è¯´æ˜ | ä½¿ç”¨åœºæ™¯ |
|------|------|----------|
| **åˆ›å»ºçŸ©é˜µ** | å®šä¹‰è¡¨åã€æ³¨é‡Šã€å¼•æ“ç­‰åŸºç¡€ä¿¡æ¯ | æ–°å»ºä¸šåŠ¡æ•°æ®è¡¨ |
| **ç‰©ç†å»ºè¡¨** | æ ¹æ®å­—æ®µé…ç½®åœ¨æ•°æ®åº“ä¸­åˆ›å»ºçœŸå®çš„è¡¨ | é…ç½®å®Œæˆåä¸€é”®å»ºè¡¨ |
| **åŒæ­¥è¡¨ç»“æ„** | è‡ªåŠ¨æ£€æµ‹é…ç½®å˜æ›´å¹¶åŒæ­¥åˆ°æ•°æ®åº“ | å­—æ®µè°ƒæ•´ååŒæ­¥ |
| **ä¿®æ”¹è¡¨æ³¨é‡Š** | æ›´æ–°çŸ©é˜µæ³¨é‡Šæ—¶è‡ªåŠ¨åŒæ­¥åˆ°æ•°æ®åº“ | ä¿®æ”¹è¡¨è¯´æ˜ã€ä¼˜åŒ–æ–‡æ¡£ |
| **æ¸…ç©ºæ•°æ®** | Truncateè¡¨æ•°æ®(è¶…çº§ç®¡ç†å‘˜æƒé™) | æµ‹è¯•ç¯å¢ƒé‡ç½®æ•°æ® |
| **DDLå¯¼å‡º** | å¯¼å‡ºçŸ©é˜µçš„CREATE TABLEè¯­å¥ | è·¨ç¯å¢ƒè¿ç§»ã€å¤‡ä»½è¡¨ç»“æ„ |
| **DDLå¯¼å…¥** | è§£æDDLè¯­å¥å¿«é€Ÿåˆ›å»ºçŸ©é˜µé…ç½® | å¿«é€Ÿå¤åˆ¶è¡¨ç»“æ„ã€æ‰¹é‡å¯¼å…¥ |
| **å˜æ›´æ—¥å¿—å¯¼å‡º** | å¯¼å‡ºçŸ©é˜µçš„å®Œæ•´å˜æ›´å†å²å’Œé…ç½® | è·¨ç¯å¢ƒé…ç½®åŒæ­¥ |
| **å˜æ›´æ—¥å¿—å¯¼å…¥** | å¯¼å…¥å˜æ›´å†å²å¹¶åº”ç”¨åˆ°ç›®æ ‡ç¯å¢ƒ | ç”Ÿäº§ç¯å¢ƒåŒæ­¥é¢„ç”Ÿäº§é…ç½® |
| **åˆ é™¤ä¿æŠ¤** | æœ‰æ•°æ®æ—¶ç¦æ­¢åˆ é™¤çŸ©é˜µé…ç½® | é˜²æ­¢è¯¯åˆ é‡è¦é…ç½® |
| **å˜æ›´è®°å½•** | è®°å½•æ‰€æœ‰DDLæ“ä½œçš„æ‰§è¡Œå†å² | å®¡è®¡å’Œé—®é¢˜æ’æŸ¥ |

#### 1.2 æ ¸å¿ƒå­—æ®µ

```java
SysMatrix {
    Long id;                    // ä¸»é”®
    String tableName;           // è¡¨åï¼ˆç‰©ç†è¡¨åï¼‰
    String tableComment;        // è¡¨æ³¨é‡Š
    String dataSource;          // æ•°æ®æºï¼ˆæ”¯æŒå¤šæ•°æ®æºï¼‰
    String primaryKey;          // ä¸»é”®å­—æ®µåï¼ˆé»˜è®¤idï¼‰
    String engine;              // å­˜å‚¨å¼•æ“ï¼ˆInnoDB/MyISAMï¼‰
    String charset;             // å­—ç¬¦é›†ï¼ˆutf8mb4ï¼‰
    String status;              // çŠ¶æ€ï¼ˆ0æœªåˆ›å»º/1å·²åˆ›å»º/2å·²åŒæ­¥/3å¾…åŒæ­¥ï¼‰
    Integer sort;               // æ’åº
}
```

#### 1.3 çŠ¶æ€æµè½¬

```
æœªåˆ›å»º(0)
   â†“ [åˆ›å»ºç‰©ç†è¡¨] createPhysicalTable()
å·²åˆ›å»º(1)
   â†“ [åŒæ­¥è¡¨ç»“æ„] syncTableStructure()
å·²åŒæ­¥(2)
   â†“ [ä¿®æ”¹å­—æ®µé…ç½®] afterAdd/afterUpdate/afterDelete
å¾…åŒæ­¥(3)
   â†“ [å†æ¬¡åŒæ­¥] syncTableStructure()
å·²åŒæ­¥(2)
```

#### 1.4 ç‰¹æ®ŠåŠŸèƒ½

**è‡ªåŠ¨åˆ›å»ºå®¡è®¡å­—æ®µ**ï¼š
æ¯ä¸ªçŸ©é˜µè¡¨è‡ªåŠ¨åŒ…å«5ä¸ªå®¡è®¡å­—æ®µï¼ˆä¸å­˜å…¥SysMatrixColumné…ç½®ï¼‰ï¼š
- `create_by` - åˆ›å»ºè€…
- `create_at` - åˆ›å»ºæ—¶é—´
- `update_by` - æ›´æ–°è€…
- `update_at` - æ›´æ–°æ—¶é—´ï¼ˆè‡ªåŠ¨åˆ›å»ºç´¢å¼• `idx_update_at`ï¼‰
- `valid` - æœ‰æ•ˆæ€§ï¼ˆè½¯åˆ é™¤æ ‡è®°ï¼‰

**å”¯ä¸€ç´¢å¼•åŒ…å«validå­—æ®µ**ï¼š
è¡¨åå”¯ä¸€ç´¢å¼•ä¸º `uk_table_name_valid(table_name, valid)`ï¼Œæ”¯æŒè½¯åˆ é™¤åé‡å»ºåŒåè¡¨ã€‚

**è‡ªåŠ¨åˆ›å»ºIDä¸»é”®**ï¼š
æ–°å»ºçŸ©é˜µæ—¶è‡ªåŠ¨åˆ›å»ºä¸»é”®åˆ—ï¼š
- å­—æ®µåï¼š`id`
- ç±»å‹ï¼š`BIGINT(20)`
- å±æ€§ï¼š`NOT NULL AUTO_INCREMENT PRIMARY KEY`
- æ’åºï¼š`sort=0`ï¼ˆç¬¬ä¸€ä½ï¼‰

---

### 2. å­—æ®µé…ç½® (SysMatrixColumn)

**åŠŸèƒ½æè¿°**ï¼šå®šä¹‰çŸ©é˜µè¡¨çš„å­—æ®µç»“æ„ï¼ŒåŒ…æ‹¬æ•°æ®ç±»å‹ã€çº¦æŸã€ç´¢å¼•ç­‰ã€‚

#### 2.1 ä¸»è¦èƒ½åŠ›

| èƒ½åŠ› | è¯´æ˜ | åŒæ­¥è¡Œä¸º |
|------|------|---------|
| **æ·»åŠ å­—æ®µ** | é…ç½®æ–°å­—æ®µçš„æ‰€æœ‰å±æ€§ | âœ… åŒæ­¥æ—¶æ‰§è¡Œ `ALTER TABLE ADD COLUMN` |
| **è°ƒæ•´é¡ºåº** | ä¿®æ”¹å­—æ®µçš„sortå€¼è°ƒæ•´ä½ç½® | âœ… åŒæ­¥æ—¶æ‰§è¡Œ `MODIFY COLUMN ... AFTER` |
| **ç´¢å¼•ç®¡ç†** | é…ç½®æ™®é€šç´¢å¼•å’Œå”¯ä¸€ç´¢å¼• | âœ… åŒæ­¥æ—¶è‡ªåŠ¨åˆ›å»º/åˆ é™¤ç´¢å¼• |
| **åˆ é™¤å­—æ®µ** | åˆ é™¤å­—æ®µé…ç½® | âœ… åŒæ­¥æ—¶æ‰§è¡Œ `DROP COLUMN` |
| **æ•°æ®æ£€æŸ¥** | åˆ é™¤å‰æ£€æŸ¥å­—æ®µæ˜¯å¦æœ‰æ•°æ® | âš ï¸ æœ‰æ•°æ®åˆ™é˜»æ­¢åˆ é™¤ |
| **çŠ¶æ€è”åŠ¨** | å­—æ®µå˜æ›´è‡ªåŠ¨æ ‡è®°çŸ©é˜µä¸ºå¾…åŒæ­¥ | ğŸ”„ è§¦å‘çŠ¶æ€æµè½¬ |

#### 2.2 æ ¸å¿ƒå­—æ®µ

```java
SysMatrixColumn {
    Long id;                    // ä¸»é”®
    Long matrixId;              // æ‰€å±çŸ©é˜µID
    String columnName;          // å­—æ®µåï¼ˆä¸‹åˆ’çº¿å‘½åï¼‰
    String columnComment;       // å­—æ®µæ³¨é‡Š
    String columnType;          // æ•°æ®åº“ç±»å‹ï¼ˆVARCHAR/INT/DECIMALç­‰ï¼‰
    String fieldType;           // è¡¨å•å­—æ®µç±»å‹ï¼ˆå‚è€ƒPortalFieldDictï¼‰
    Integer columnLength;       // å­—æ®µé•¿åº¦
    Integer decimalPlaces;      // å°æ•°ä½æ•°ï¼ˆDECIMALä¸“ç”¨ï¼‰
    String isNullable;          // æ˜¯å¦å¯ç©ºï¼ˆ0å¦/1æ˜¯ï¼‰
    String isPrimaryKey;        // æ˜¯å¦ä¸»é”®ï¼ˆ0å¦/1æ˜¯ï¼‰
    String isIndex;             // æ˜¯å¦æ™®é€šç´¢å¼•ï¼ˆ0å¦/1æ˜¯ï¼‰
    String isUnique;            // æ˜¯å¦å”¯ä¸€ç´¢å¼•ï¼ˆ0å¦/1æ˜¯ï¼‰
    String defaultValue;        // é»˜è®¤å€¼ï¼ˆä¸»é”®ä¸ºåºåˆ—æ—¶å­˜åºåˆ—åï¼‰
    Integer sort;               // å­—æ®µé¡ºåºï¼ˆæ•°å­—è¶Šå°è¶Šé å‰ï¼‰
}
```

#### 2.3 æ•°æ®ç±»å‹æ˜ å°„

| ä¸šåŠ¡åœºæ™¯ | columnType | columnLength | decimalPlaces | ç¤ºä¾‹ |
|---------|-----------|--------------|---------------|------|
| å§“å/ç¼–å· | VARCHAR | 50 | - | `user_name VARCHAR(50)` |
| é•¿æ–‡æœ¬ | TEXT | - | - | `description TEXT` |
| å¹´é¾„/æ•°é‡ | INT | - | - | `age INT` |
| ä¸»é”®ID | BIGINT | 20 | - | `id BIGINT(20)` |
| é‡‘é¢ | DECIMAL | 19 | 2 | `amount DECIMAL(19,2)` |
| ç™¾åˆ†æ¯” | DECIMAL | 5 | 2 | `rate DECIMAL(5,2)` |
| æ—¥æœŸæ—¶é—´ | DATETIME | - | - | `create_at DATETIME` |
| æ—¥æœŸ | DATE | - | - | `birth_date DATE` |

#### 2.4 ä¸»é”®ç±»å‹å¤„ç†

**æ•°å­—è‡ªå¢ä¸»é”®**ï¼ˆæ¨èï¼‰ï¼š
```java
// é…ç½®
columnType = "BIGINT"
isPrimaryKey = "1"
defaultValue = null

// ç”ŸæˆDDL
`id` BIGINT(20) NOT NULL AUTO_INCREMENT
```

**å­—ç¬¦ä¸²åºåˆ—ä¸»é”®**ï¼š
```java
// é…ç½®
columnType = "VARCHAR"
columnLength = 50
isPrimaryKey = "1"
defaultValue = "SEQ_USER_ID"  // åºåˆ—å

// ç”ŸæˆDDLï¼ˆä¸æ·»åŠ AUTO_INCREMENTï¼‰
`id` VARCHAR(50) NOT NULL

// æ’å…¥æ•°æ®æ—¶
String seq = saSequenceService.getSeq("SEQ_USER_ID");
// ä½¿ç”¨seqä½œä¸ºä¸»é”®å€¼
```

#### 2.5 ç´¢å¼•å‘½åè§„èŒƒ

| ç´¢å¼•ç±»å‹ | é…ç½® | å‘½åè§„åˆ™ | ç¤ºä¾‹ |
|---------|------|---------|------|
| ä¸»é”®ç´¢å¼• | isPrimaryKey="1" | PRIMARY | `PRIMARY KEY (id)` |
| æ™®é€šç´¢å¼• | isIndex="1" | idx_å­—æ®µå | `KEY idx_user_name (user_name)` |
| å”¯ä¸€ç´¢å¼• | isUnique="1" | uk_å­—æ®µå | `UNIQUE KEY uk_email (email)` |
| å®¡è®¡ç´¢å¼• | è‡ªåŠ¨åˆ›å»º | idx_update_at | `KEY idx_update_at (update_at)` |

---

### 3. è¡¨å•é…ç½® (SysFormConfig)

**åŠŸèƒ½æè¿°**ï¼šå®šä¹‰å­—æ®µåœ¨è¡¨å•ä¸­çš„å±•ç¤ºæ–¹å¼ã€éªŒè¯è§„åˆ™å’Œå¸ƒå±€ã€‚

#### 3.1 ä¸»è¦èƒ½åŠ›

| èƒ½åŠ› | è¯´æ˜ | é…ç½®é¡¹ |
|------|------|--------|
| **å­—æ®µæ¸²æŸ“** | é…ç½®è¡¨å•ç»„ä»¶ç±»å‹ | fieldTypeï¼ˆ18ç§ç±»å‹ï¼‰ |
| **éªŒè¯è§„åˆ™** | æ­£åˆ™è¡¨è¾¾å¼éªŒè¯ | validationRule |
| **èŒƒå›´é™åˆ¶** | æ•°å­—ã€æ—¥æœŸèŒƒå›´ | minValue, maxValue |
| **å¸ƒå±€è®¾è®¡** | å¯è§†åŒ–æ‹–æ‹½å¸ƒå±€ | positionX, positionY, width, height |
| **å­—æ®µå±æ€§** | å¿…å¡«ã€åªè¯»ã€æ˜¾ç¤ºéšè— | isRequired, readonly, hidden |
| **å­—å…¸å…³è”** | ä¸‹æ‹‰é€‰æ‹©æ•°æ®æº | dict |
| **å•ä½è½¬æ¢** | è´§å¸ã€ç™¾åˆ†æ¯”è½¬æ¢ | unit |

#### 3.2 æ ¸å¿ƒå­—æ®µ

```java
SysFormConfig {
    Long id;                    // ä¸»é”®
    Long matrixId;              // æ‰€å±çŸ©é˜µID
    Long columnId;              // å…³è”å­—æ®µID
    String label;               // æ˜¾ç¤ºæ ‡ç­¾
    String description;         // å­—æ®µè¯´æ˜/æç¤º
    String fieldType;           // å­—æ®µç±»å‹ï¼ˆå‚è€ƒä¸‹æ–¹å­—å…¸ï¼‰
    String isRequired;          // æ˜¯å¦å¿…å¡«ï¼ˆ0å¦/1æ˜¯ï¼‰
    String readonly;            // æ˜¯å¦åªè¯»ï¼ˆ0å¦/1æ˜¯ï¼‰
    String hidden;              // æ˜¯å¦éšè—ï¼ˆ0å¦/1æ˜¯ï¼‰
    String validationRule;      // éªŒè¯è§„åˆ™ï¼ˆæ­£åˆ™è¡¨è¾¾å¼ï¼‰
    String minValue;            // æœ€å°å€¼
    String maxValue;            // æœ€å¤§å€¼
    String defaultValue;        // é»˜è®¤å€¼
    String dict;                // å­—å…¸æ•°æ®æº
    String unit;                // å•ä½è½¬æ¢é…ç½®
    Integer width;              // å®½åº¦
    Integer height;             // é«˜åº¦
    Integer positionX;          // Xåæ ‡
    Integer positionY;          // Yåæ ‡
    Integer sort;               // æ’åº
}
```

#### 3.3 å­—æ®µç±»å‹è¯¦è§£ (PortalFieldDict)

| å€¼ | ç±»å‹ | è¯´æ˜ | é€‚ç”¨åœºæ™¯ | å…³é”®é…ç½® |
|---|------|------|---------|---------|
| 1 | å•è¡Œæ–‡æœ¬ | Inputæ–‡æœ¬æ¡† | å§“åã€ç¼–å· | validationRule |
| 2 | çœŸå€¼ | Switchå¼€å…³ | æ˜¯å¦å¯ç”¨ | - |
| 3 | æ•°å­— | InputNumber | å¹´é¾„ã€æ•°é‡ | minValue, maxValue |
| 4 | ä¸‹æ‹‰é€‰æ‹© | Selectå•é€‰ | æ€§åˆ«ã€çŠ¶æ€ | dict |
| 5 | æ ‘å½¢ä¸‹æ‹‰ | TreeSelect | ç»„ç»‡æ¶æ„ | dict |
| 6 | æ—¥æœŸ | DatePicker | å‡ºç”Ÿæ—¥æœŸ | - |
| 7 | æ—¥æœŸæ—¶é—´ | DateTimePicker | åˆ›å»ºæ—¶é—´ | - |
| 10 | å¤šè¡Œæ–‡æœ¬ | Textarea | å¤‡æ³¨ã€æè¿° | - |
| 12 | å›¾ç‰‡ | ImageUpload | å¤´åƒã€è¯ä»¶ | - |
| 15 | æ–‡ä»¶ | FileUpload | é™„ä»¶ | - |
| 16 | è´§å¸ | MoneyInput | é‡‘é¢ | unit(å…ƒ/åˆ†è½¬æ¢) |
| 17 | ç™¾åˆ†æ¯” | PercentInput | æ¯”ç‡ | unit(å°æ•°/ç™¾åˆ†æ¯”) |
| 18 | ä¸‹æ‹‰å¤šé€‰ | Selectå¤šé€‰ | æ ‡ç­¾ã€æƒé™ | dict |

#### 3.4 éªŒè¯è§„åˆ™ç¤ºä¾‹

``javascript
// ä¸­æ–‡å§“åï¼ˆ2-10ä¸ªå­—ç¬¦ï¼‰
validationRule: "^[\\u4e00-\\u9fa5]{2,10}$"

// æ‰‹æœºå·
validationRule: "^1[3-9]\\d{9}$"

// é‚®ç®±
validationRule: "^[a-zA-Z0-9_-]+@[a-zA-Z0-9_-]+(\\.[a-zA-Z0-9_-]+)+$"

// èº«ä»½è¯å·
validationRule: "^[1-9]\\d{5}(18|19|20)\\d{2}(0[1-9]|1[0-2])(0[1-9]|[12]\\d|3[01])\\d{3}[\\dXx]$"

// æ•°å­—èŒƒå›´ï¼ˆé€šè¿‡minValue/maxValueæ›´åˆé€‚ï¼‰
validationRule: "^[1-9]\\d*$"  // æ­£æ•´æ•°
```

---

### 4. è”åŠ¨é…ç½® (SysFormLinkage)

**åŠŸèƒ½æè¿°**ï¼šé€šè¿‡JavaScriptè„šæœ¬å®ç°å­—æ®µé—´çš„è‡ªåŠ¨è®¡ç®—å’Œè”åŠ¨é€»è¾‘ã€‚

#### 4.1 ä¸»è¦èƒ½åŠ›

| èƒ½åŠ› | è¯´æ˜ | ç¤ºä¾‹ |
|------|------|------|
| **å€¼ç›‘å¬** | ç›‘å¬å­—æ®µå€¼å˜åŒ– | score1æ”¹å˜æ—¶è§¦å‘ |
| **æ¡ä»¶åˆ¤æ–­** | æ»¡è¶³æ¡ä»¶æ‰æ‰§è¡Œ | `score1 != null && score2 != null` |
| **è‡ªåŠ¨è®¡ç®—** | JavaScriptè®¡ç®—é€»è¾‘ | `total = score1 + score2` |
| **å¤šå­—æ®µæ›´æ–°** | ä¸€æ¬¡æ›´æ–°å¤šä¸ªå­—æ®µ | åŒæ—¶æ›´æ–°totalå’Œaverage |
| **ä¼˜å…ˆçº§æ§åˆ¶** | æ§åˆ¶æ‰§è¡Œé¡ºåº | priorityå€¼è¶Šå°è¶Šå…ˆæ‰§è¡Œ |
| **å¯ç”¨å¼€å…³** | åŠ¨æ€å¯ç”¨/ç¦ç”¨è”åŠ¨ | isEnabledåˆ‡æ¢ |

#### 4.2 æ ¸å¿ƒå­—æ®µ

```java
SysFormLinkage {
    Long id;                    // ä¸»é”®
    Long formConfigId;          // æ‰€å±è¡¨å•é…ç½®ID
    String linkageName;         // è”åŠ¨åç§°
    String triggerEvent;        // è§¦å‘äº‹ä»¶ï¼ˆchange/blur/focusï¼‰
    String conditionScript;     // æ¡ä»¶è„šæœ¬ï¼ˆJavaScriptï¼‰
    String actionScript;        // æ‰§è¡Œè„šæœ¬ï¼ˆJavaScriptï¼‰
    String targetFields;        // ç›®æ ‡å­—æ®µï¼ˆé€—å·åˆ†éš”ï¼‰
    Integer priority;           // ä¼˜å…ˆçº§ï¼ˆæ•°å­—è¶Šå°è¶Šå…ˆæ‰§è¡Œï¼‰
    String isEnabled;           // æ˜¯å¦å¯ç”¨ï¼ˆ0å¦/1æ˜¯ï¼‰
    Integer sort;               // æ’åº
}
```

#### 4.3 è§¦å‘äº‹ä»¶

| äº‹ä»¶ | è¯´æ˜ | ä½¿ç”¨åœºæ™¯ |
|------|------|---------|
| change | å€¼æ”¹å˜æ—¶è§¦å‘ | å®æ—¶è®¡ç®—ã€è”åŠ¨æŸ¥è¯¢ |
| blur | å¤±å»ç„¦ç‚¹æ—¶è§¦å‘ | æ ¼å¼åŒ–ã€éªŒè¯ |
| focus | è·å¾—ç„¦ç‚¹æ—¶è§¦å‘ | æ˜¾ç¤ºæç¤ºã€é¢„åŠ è½½ |

#### 4.4 è„šæœ¬ç¼–å†™è§„èŒƒ

**å¯ç”¨å˜é‡**ï¼š
- æ‰€æœ‰è¡¨å•å­—æ®µï¼ˆé€šè¿‡å­—æ®µåç›´æ¥è®¿é—®ï¼‰
- æ ‡å‡†JavaScriptè¯­æ³•å’Œå†…ç½®å¯¹è±¡

**æ³¨æ„äº‹é¡¹**ï¼š
- âŒ ä¸å¯ä½¿ç”¨æµè§ˆå™¨APIï¼ˆwindow, documentç­‰ï¼‰
- âŒ ä¸å¯è®¿é—®å¤–éƒ¨èµ„æºï¼ˆAjax, Fetchç­‰ï¼‰
- âœ… æ”¯æŒMathã€Dateç­‰å†…ç½®å¯¹è±¡
- âœ… æ”¯æŒæ ‡å‡†è¿ç®—ç¬¦å’Œæ§åˆ¶ç»“æ„

#### 4.5 ç»å…¸åœºæ™¯ç¤ºä¾‹

**åœºæ™¯1ï¼šæ€»åˆ†è®¡ç®—**
```javascript
// linkageName: "è‡ªåŠ¨è®¡ç®—æ€»åˆ†å’Œå¹³å‡åˆ†"
// triggerEvent: "change"

// conditionScript - æ‰€æœ‰åˆ†æ•°éƒ½å·²å¡«å†™
score1 != null && score2 != null && score3 != null

// actionScript - è®¡ç®—æ€»åˆ†å’Œå¹³å‡åˆ†
totalScore = parseFloat(score1) + parseFloat(score2) + parseFloat(score3);
avgScore = (totalScore / 3).toFixed(2);

// targetFields - æ›´æ–°çš„å­—æ®µ
totalScore,avgScore
```

**åœºæ™¯2ï¼šä»·æ ¼æŠ˜æ‰£è®¡ç®—**
```javascript
// linkageName: "è‡ªåŠ¨è®¡ç®—ä¼˜æƒ åä»·æ ¼"
// triggerEvent: "change"

// conditionScript
originalPrice != null && discountRate != null

// actionScript
finalPrice = (originalPrice * (1 - discountRate / 100)).toFixed(2);
discountAmount = (originalPrice - finalPrice).toFixed(2);

// targetFields
finalPrice,discountAmount
```

**åœºæ™¯3ï¼šæ ¹æ®å¹´é¾„åˆ¤æ–­ç±»åˆ«**
```javascript
// linkageName: "å¹´é¾„æ®µè‡ªåŠ¨åˆ†ç±»"
// triggerEvent: "blur"

// conditionScript
age != null && age > 0

// actionScript
if (age < 18) {
    ageGroup = 'æœªæˆå¹´';
    canVote = '0';
} else if (age < 60) {
    ageGroup = 'æˆå¹´äºº';
    canVote = '1';
} else {
    ageGroup = 'è€å¹´äºº';
    canVote = '1';
}

// targetFields
ageGroup,canVote
```

**åœºæ™¯4ï¼šBMIè®¡ç®—**
```javascript
// linkageName: "BMIæŒ‡æ•°è®¡ç®—"
// triggerEvent: "change"

// conditionScript
height != null && weight != null && height > 0

// actionScript
bmi = (weight / Math.pow(height / 100, 2)).toFixed(2);
if (bmi < 18.5) {
    bmiLevel = 'åç˜¦';
} else if (bmi < 24) {
    bmiLevel = 'æ­£å¸¸';
} else if (bmi < 28) {
    bmiLevel = 'åèƒ–';
} else {
    bmiLevel = 'è‚¥èƒ–';
}

// targetFields
bmi,bmiLevel
```

**åœºæ™¯5ï¼šæ—¥æœŸèŒƒå›´éªŒè¯**
```javascript
// linkageName: "ç»“æŸæ—¥æœŸä¸èƒ½æ—©äºå¼€å§‹æ—¥æœŸ"
// triggerEvent: "change"

// conditionScript
startDate != null && endDate != null

// actionScript
if (new Date(endDate) < new Date(startDate)) {
    endDate = startDate;
    dateError = 'ç»“æŸæ—¥æœŸä¸èƒ½æ—©äºå¼€å§‹æ—¥æœŸ';
} else {
    dateError = '';
}

// targetFields
endDate,dateError
```

---

### 5. å˜æ›´æ—¥å¿— (SysMatrixChangeLog)

**åŠŸèƒ½æè¿°**ï¼šè®°å½•æ‰€æœ‰è¡¨ç»“æ„å˜æ›´çš„DDLæ“ä½œå†å²ï¼Œæä¾›å®Œæ•´çš„å®¡è®¡è¿½è¸ªã€‚

#### 5.1 æ ¸å¿ƒå­—æ®µ

```java
SysMatrixChangeLog {
    Long id;                    // ä¸»é”®
    Long matrixId;              // æ‰€å±çŸ©é˜µID
    Integer version;            // ç‰ˆæœ¬å·ï¼ˆè‡ªåŠ¨é€’å¢ï¼‰
    String changeType;          // å˜æ›´ç±»å‹ï¼ˆå‚è€ƒä¸‹æ–¹å­—å…¸ï¼‰
    String changeDesc;          // å˜æ›´æè¿°
    String ddlStatement;        // DDLè¯­å¥
    String affectedColumn;      // å½±å“çš„å­—æ®µå
    String executeStatus;       // æ‰§è¡ŒçŠ¶æ€ï¼ˆ0å¤±è´¥/1æˆåŠŸï¼‰
    String errorMsg;            // é”™è¯¯ä¿¡æ¯
    Integer sort;               // æ’åº
    String createBy;            // åˆ›å»ºè€…
    Date createAt;              // åˆ›å»ºæ—¶é—´
}
```

#### 5.2 å˜æ›´ç±»å‹å­—å…¸ (MatrixChangeTypeDict)

| å€¼ | ç±»å‹ | è¯´æ˜ | ç¤ºä¾‹DDL |
|---|------|------|---------|
| 1 | CREATE_TABLE | åˆ›å»ºè¡¨ | `CREATE TABLE eval_user ...` |
| 2 | ADD_COLUMN | æ·»åŠ å­—æ®µ | `ALTER TABLE ... ADD COLUMN age INT` |
| 3 | MODIFY_COLUMN | è°ƒæ•´å­—æ®µé¡ºåº | `ALTER TABLE ... MODIFY COLUMN age INT AFTER name` |
| 4 | ADD_INDEX | æ·»åŠ ç´¢å¼• | `ALTER TABLE ... ADD INDEX idx_age (age)` |
| 5 | DROP_INDEX | åˆ é™¤ç´¢å¼• | `ALTER TABLE ... DROP INDEX idx_age` |
| 6 | DROP_COLUMN | åˆ é™¤å­—æ®µ | `ALTER TABLE ... DROP COLUMN age` |
| 7 | MODIFY_TABLE_COMMENT | ä¿®æ”¹è¡¨æ³¨é‡Š | `ALTER TABLE ... COMMENT 'æ–°æ³¨é‡Š'` |
| 7 | MODIFY_TABLE_COMMENT | ä¿®æ”¹è¡¨æ³¨é‡Š | `ALTER TABLE ... COMMENT 'æ–°æ³¨é‡Š'` |

#### 5.3 ç‰ˆæœ¬ç®¡ç†

**ç‰ˆæœ¬å·è§„åˆ™**ï¼š
- æ¯æ¬¡åŒæ­¥æ“ä½œåˆ†é…ä¸€ä¸ªæ–°ç‰ˆæœ¬å·
- ç‰ˆæœ¬å·ä»1å¼€å§‹è‡ªåŠ¨é€’å¢
- åŒä¸€ç‰ˆæœ¬å¯èƒ½åŒ…å«å¤šæ¡å˜æ›´è®°å½•

**ç¤ºä¾‹**ï¼š
```
Version 1:
  - CREATE_TABLE: åˆ›å»ºè¡¨ eval_user
  
Version 2:
  - ADD_COLUMN: æ·»åŠ å­—æ®µ phone
  - ADD_COLUMN: æ·»åŠ å­—æ®µ email
  - ADD_INDEX: æ·»åŠ ç´¢å¼• idx_phone
  
Version 3:
  - MODIFY_COLUMN: è°ƒæ•´å­—æ®µé¡ºåº email
  - DROP_INDEX: åˆ é™¤ç´¢å¼• idx_phone
  - DROP_COLUMN: åˆ é™¤å­—æ®µ phone
```

#### 5.4 æ‰§è¡ŒçŠ¶æ€

| çŠ¶æ€ | è¯´æ˜ | å¤„ç†å»ºè®® |
|------|------|---------|
| 0 | å¤±è´¥ | æŸ¥çœ‹errorMsgï¼Œä¿®æ­£é…ç½®åé‡è¯• |
| 1 | æˆåŠŸ | æ­£å¸¸ï¼Œæ— éœ€å¤„ç† |

---

### 6. æ•°æ®æ“ä½œ (MatrixDataService)

**åŠŸèƒ½æè¿°**ï¼šå¯¹åŠ¨æ€åˆ›å»ºçš„çŸ©é˜µè¡¨è¿›è¡Œæ ‡å‡†CRUDæ“ä½œã€‚

#### 6.1 ä¸»è¦æ¥å£

| æ–¹æ³• | è¯´æ˜ | å‚æ•° | è¿”å›å€¼ |
|------|------|------|--------|
| insert | æ’å…¥æ•°æ® | matrixId, data | å½±å“è¡Œæ•° |
| update | æ›´æ–°æ•°æ® | matrixId, id, data | å½±å“è¡Œæ•° |
| delete | åˆ é™¤æ•°æ® | matrixId, id | å½±å“è¡Œæ•° |
| selectById | æŸ¥è¯¢å•æ¡ | matrixId, id | æ•°æ®Map |
| selectList | æŸ¥è¯¢åˆ—è¡¨ | matrixId | æ•°æ®List |
| selectByCondition | æ¡ä»¶æŸ¥è¯¢ | matrixId, condition | æ•°æ®List |

#### 6.2 çŠ¶æ€æ£€æŸ¥

æ‰€æœ‰æ•°æ®æ“ä½œå‰éƒ½ä¼šæ£€æŸ¥çŸ©é˜µçŠ¶æ€ï¼š
```java
// å…è®¸æ“ä½œçš„çŠ¶æ€
MatrixStatusDict.CREATED      // å·²åˆ›å»º(1)
MatrixStatusDict.SYNCED       // å·²åŒæ­¥(2)
MatrixStatusDict.PENDING_SYNC // å¾…åŒæ­¥(3)

// ç¦æ­¢æ“ä½œçš„çŠ¶æ€
MatrixStatusDict.NOT_CREATED  // æœªåˆ›å»º(0) - æŠ›å‡ºå¼‚å¸¸
```

#### 6.3 å¤šæ•°æ®æºæ”¯æŒ

- æ”¯æŒåˆ‡æ¢åˆ°é…ç½®çš„æ•°æ®æºæ‰§è¡Œæ“ä½œ
- æ“ä½œå®Œæˆåè‡ªåŠ¨é‡ç½®å›é»˜è®¤æ•°æ®æº
- ä¿è¯æ•°æ®æºéš”ç¦»å’Œå®‰å…¨æ€§

---

## æŠ€æœ¯å®ç°

### 1. é¡¹ç›®ç»“æ„

```
core/forge/
â”œâ”€â”€ constant/dict/              # å­—å…¸æšä¸¾
â”‚   â”œâ”€â”€ MatrixStatusDict.java      # çŸ©é˜µçŠ¶æ€å­—å…¸
â”‚   â”œâ”€â”€ MatrixChangeTypeDict.java  # å˜æ›´ç±»å‹å­—å…¸
â”‚   â””â”€â”€ JoinTypeDict.java          # å…³è”ç±»å‹å­—å…¸
â”‚
â”œâ”€â”€ controller/                 # æ§åˆ¶å™¨å±‚
â”‚   â”œâ”€â”€ MatrixDataController.java          # æ•°æ®æ“ä½œæ§åˆ¶å™¨
â”‚   â”œâ”€â”€ matrix/                            # çŸ©é˜µç›¸å…³æ§åˆ¶å™¨
â”‚   â”‚   â”œâ”€â”€ SysMatrixPortalController.java
â”‚   â”‚   â”œâ”€â”€ SysMatrixColumnPortalController.java
â”‚   â”‚   â””â”€â”€ SysMatrixChangeLogPortalController.java
â”‚   â”œâ”€â”€ form/                              # è¡¨å•ç›¸å…³æ§åˆ¶å™¨
â”‚   â”‚   â”œâ”€â”€ SysFormConfigPortalController.java
â”‚   â”‚   â””â”€â”€ SysFormLinkagePortalController.java
â”‚   â””â”€â”€ dataset/                           # æ•°æ®é›†ç›¸å…³æ§åˆ¶å™¨
â”‚
â”œâ”€â”€ service/                    # æœåŠ¡å±‚
â”‚   â”œâ”€â”€ MatrixDataService.java             # æ•°æ®æ“ä½œæœåŠ¡
â”‚   â”œâ”€â”€ martix/                            # çŸ©é˜µç›¸å…³æœåŠ¡
â”‚   â”‚   â”œâ”€â”€ SysMatrixPortalService.java        # çŸ©é˜µç®¡ç†æ ¸å¿ƒæœåŠ¡
â”‚   â”‚   â”œâ”€â”€ SysMatrixColumnPortalService.java  # å­—æ®µé…ç½®æœåŠ¡
â”‚   â”‚   â”œâ”€â”€ SysMatrixChangeLogPortalService.java # å˜æ›´æ—¥å¿—æœåŠ¡
â”‚   â”‚   â””â”€â”€ SysMatrixDDLSerivce.java          # DDLæ“ä½œç‹¬ç«‹æœåŠ¡
â”‚   â”œâ”€â”€ form/                              # è¡¨å•ç›¸å…³æœåŠ¡
â”‚   â”‚   â”œâ”€â”€ SysFormConfigPortalService.java    # è¡¨å•é…ç½®æœåŠ¡
â”‚   â”‚   â””â”€â”€ SysFormLinkagePortalService.java   # è”åŠ¨é…ç½®æœåŠ¡
â”‚   â””â”€â”€ dataset/                           # æ•°æ®é›†ç›¸å…³æœåŠ¡
â”‚
â”œâ”€â”€ dao/                        # æ•°æ®è®¿é—®å±‚
â”‚   â”œâ”€â”€ entity/                     # å®ä½“ç±»
â”‚   â”‚   â”œâ”€â”€ SysMatrix.java
â”‚   â”‚   â”œâ”€â”€ SysMatrixColumn.java
â”‚   â”‚   â”œâ”€â”€ SysFormConfig.java
â”‚   â”‚   â”œâ”€â”€ SysFormLinkage.java
â”‚   â”‚   â”œâ”€â”€ SysMatrixChangeLog.java
â”‚   â”‚   â”œâ”€â”€ SysPortalDataset.java
â”‚   â”‚   â””â”€â”€ SysPortalDatasetColumn.java
â”‚   â”‚
â”‚   â”œâ”€â”€ mapper/                     # MyBatis Mapper
â”‚   â”‚   â”œâ”€â”€ SysMatrixMapper.java & .xml
â”‚   â”‚   â”œâ”€â”€ SysMatrixColumnMapper.java & .xml
â”‚   â”‚   â”œâ”€â”€ SysFormConfigMapper.java & .xml
â”‚   â”‚   â”œâ”€â”€ SysFormLinkageMapper.java & .xml
â”‚   â”‚   â””â”€â”€ SysMatrixChangeLogMapper.java & .xml
â”‚   â”‚
â”‚   â”œâ”€â”€ repository/                 # RepositoryæœåŠ¡
â”‚   â”‚   â”œâ”€â”€ SysMatrixService.java
â”‚   â”‚   â”œâ”€â”€ SysMatrixColumnService.java
â”‚   â”‚   â”œâ”€â”€ SysFormConfigService.java
â”‚   â”‚   â”œâ”€â”€ SysFormLinkageService.java
â”‚   â”‚   â””â”€â”€ SysMatrixChangeLogService.java
â”‚   â”‚
â”‚   â””â”€â”€ schema/                     # è¡¨ç»“æ„å®šä¹‰
â”‚       â”œâ”€â”€ SysMatrixSchema.java
â”‚       â”œâ”€â”€ SysMatrixColumnSchema.java
â”‚       â”œâ”€â”€ SysFormConfigSchema.java
â”‚       â”œâ”€â”€ SysFormLinkageSchema.java
â”‚       â””â”€â”€ SysMatrixChangeLogSchema.java
â”‚
â””â”€â”€ vo/                         # è§†å›¾å¯¹è±¡
    â”œâ”€â”€ SysMatrixVO.java
    â”œâ”€â”€ SysMatrixColumnVO.java
    â”œâ”€â”€ SysFormConfigVO.java
    â”œâ”€â”€ SysFormLinkageVO.java
    â””â”€â”€ SysMatrixChangeLogVO.java
```

### 2. æ ¸å¿ƒç®—æ³•

#### 2.1 è¡¨ç»“æ„åŒæ­¥ç®—æ³•

```java
syncTableStructure(matrixId) {
    1. æŸ¥è¯¢é…ç½®çš„å­—æ®µåˆ—è¡¨ (configuredColumns)
    2. æŸ¥è¯¢è¡¨ä¸­å·²å­˜åœ¨çš„å­—æ®µ (existingColumns)
    
    // å¤„ç†å­—æ®µ
    for each column in configuredColumns {
        if (!existingColumns.contains(column)) {
            // æ–°å­—æ®µï¼šæ·»åŠ 
            æ‰§è¡Œ ALTER TABLE ADD COLUMN ... AFTER
            è®°å½•å˜æ›´æ—¥å¿— (type=2)
        } else {
            // å·²å­˜åœ¨å­—æ®µï¼šè°ƒæ•´é¡ºåº
            æ‰§è¡Œ ALTER TABLE MODIFY COLUMN ... AFTER
            è®°å½•å˜æ›´æ—¥å¿— (type=3)
        }
    }
    
    // åˆ é™¤å¤šä½™å­—æ®µ
    for each existingColumn in existingColumns {
        if (!configuredColumns.contains(existingColumn)) {
            // éœ€åˆ é™¤çš„å­—æ®µ
            æ‰§è¡Œ ALTER TABLE DROP COLUMN
            è®°å½•å˜æ›´æ—¥å¿— (type=6)
        }
    }
    
    // åŒæ­¥ç´¢å¼•
    syncIndexes(matrix, columns)
    
    // æ›´æ–°çŠ¶æ€
    matrix.status = SYNCED
}
```

#### 2.2 ç´¢å¼•åŒæ­¥ç®—æ³•

```java
syncIndexes(matrix, columns) {
    1. æŸ¥è¯¢è¡¨ä¸­å·²å­˜åœ¨çš„ç´¢å¼• (existingIndexes)
    
    for each column in columns {
        // å¤„ç†æ™®é€šç´¢å¼•
        if (column.isIndex == "1") {
            if (!existingIndexes.contains("idx_" + columnName)) {
                æ‰§è¡Œ ALTER TABLE ADD INDEX idx_xxx
                è®°å½•å˜æ›´æ—¥å¿— (type=4)
            }
        } else {
            if (existingIndexes.contains("idx_" + columnName)) {
                æ‰§è¡Œ ALTER TABLE DROP INDEX idx_xxx
                è®°å½•å˜æ›´æ—¥å¿— (type=5)
            }
        }
        
        // å¤„ç†å”¯ä¸€ç´¢å¼•ï¼ˆåŒä¸Šï¼‰
        ...
    }
}
```

### 3. å…³é”®æŠ€æœ¯ç‚¹

#### 3.1 JdbcConnectService ç»Ÿä¸€æ•°æ®è®¿é—®

**è®¾è®¡åŸåˆ™**ï¼š
- æ‰€æœ‰åŠ¨æ€è¡¨çš„SQLæ‰§è¡Œç»Ÿä¸€é€šè¿‡ [`JdbcConnectService`](file://D:\workspace\mpbe\mpbe-api\core\forge\src\main\java\com\bidr\forge\config\jdbc\JdbcConnectService.java) è¿›è¡Œ
- ä¼˜å…ˆä½¿ç”¨ `NamedParameterJdbcTemplate` å®ç°å‘½åå‚æ•°åŒ–æŸ¥è¯¢
- ç»Ÿä¸€è®°å½• trace çº§åˆ«æ—¥å¿—ï¼Œä¾¿äºSQLè°ƒè¯•å’Œæ€§èƒ½åˆ†æ
- æ”¯æŒå¤šæ•°æ®æºåŠ¨æ€åˆ‡æ¢

**æ ¸å¿ƒAPI**ï¼š

```java
// æŸ¥è¯¢åˆ—è¡¨
List<Map<String, Object>> query(String sql, Map<String, Object> parameters)

// æŸ¥è¯¢å•æ¡
Map<String, Object> queryOne(String sql, Map<String, Object> parameters)

// æŸ¥è¯¢å•å€¼
<T> T queryForObject(String sql, Map<String, Object> parameters, Class<T> clazz)

// æ›´æ–°æ“ä½œï¼ˆINSERT/UPDATE/DELETEï¼‰
int update(String sql, Map<String, Object> parameters)

// æ•°æ®æºåˆ‡æ¢
void switchDataSource(String dataSourceName)
void resetToDefaultDataSource()
```

**å‘½åå‚æ•°åŒ–SQLç¤ºä¾‹**ï¼š

```java
// ä¼ ç»Ÿæ‹¼æ¥SQLï¼ˆå·²åºŸå¼ƒï¼‰
String sql = "SELECT * FROM user WHERE name = '" + name + "' AND age = " + age;
jdbcConnectService.executeQuery(sql);  // âŒ ä¸æ¨è

// å‘½åå‚æ•°åŒ–SQLï¼ˆæ¨èï¼‰
String sql = "SELECT * FROM user WHERE name = :name AND age = :age";
Map<String, Object> params = new HashMap<>();
params.put("name", name);
params.put("age", age);
jdbcConnectService.query(sql, params);  // âœ… æ¨è
```

**æ— å‚æ•°SQLè°ƒç”¨è§„èŒƒ**ï¼š

å½“æ‰§è¡Œç”± SqlBuilder ç”Ÿæˆçš„æ‹¼æ¥SQLæ—¶ï¼Œä»éœ€ä¼ å…¥ç©ºå‚æ•°Mapä»¥ä¿æŒAPIä¸€è‡´æ€§å’Œæ—¥å¿—è®°å½•ï¼š

```java
// é”™è¯¯ç”¨æ³•
String sql = sqlBuilder.buildSelectSql(req);
List<Map<String, Object>> result = jdbcConnectService.executeQuery(sql);  // âŒ æ—§API

// æ­£ç¡®ç”¨æ³•
String sql = sqlBuilder.buildSelectSql(req);
List<Map<String, Object>> result = jdbcConnectService.query(sql, new HashMap<>());  // âœ… æ–°API
```

**Traceæ—¥å¿—ç¤ºä¾‹**ï¼š

```log
2025-11-24 10:23:45.123 TRACE [JdbcConnectService] ==> æŸ¥è¯¢SQL: SELECT * FROM eval_user WHERE status = :status AND score >= :minScore
2025-11-24 10:23:45.124 TRACE [JdbcConnectService] ==> å‚æ•°: {status=1, minScore=80}
2025-11-24 10:23:45.156 TRACE [JdbcConnectService] <== æŸ¥è¯¢ç»“æœè¡Œæ•°: 25
```

**å¤šæ•°æ®æºä½¿ç”¨ç¤ºä¾‹**ï¼š

```java
// åˆ‡æ¢åˆ°æŒ‡å®šæ•°æ®æº
if (matrix.getDataSource() != null && !matrix.getDataSource().isEmpty()) {
    jdbcConnectService.switchDataSource(matrix.getDataSource());
}

try {
    // æ‰§è¡Œæ•°æ®åº“æ“ä½œ
    String sql = "SELECT * FROM " + matrix.getTableName();
    List<Map<String, Object>> result = jdbcConnectService.query(sql, new HashMap<>());
    return result;
} finally {
    // é‡ç½®å›é»˜è®¤æ•°æ®æºï¼ˆé‡è¦ï¼ï¼‰
    if (matrix.getDataSource() != null && !matrix.getDataSource().isEmpty()) {
        jdbcConnectService.resetToDefaultDataSource();
    }
}
```

#### 3.2 åŠ¨æ€DDLç”Ÿæˆ

**CREATE TABLE**ï¼š
```java
StringBuilder ddl = new StringBuilder();
ddl.append("CREATE TABLE `").append(tableName).append("` (\n");

// é…ç½®çš„å­—æ®µ
for (SysMatrixColumn column : columns) {
    ddl.append("  `").append(column.getColumnName()).append("` ");
    ddl.append(column.getColumnType());
    
    // ä¸»é”®å¤„ç†ï¼šåªæœ‰æ•°å­—ç±»å‹æ‰AUTO_INCREMENT
    if (isPrimaryKey && isNumericType) {
        ddl.append(" AUTO_INCREMENT");
    }
    // ... å…¶ä»–å±æ€§
}

// è‡ªåŠ¨æ·»åŠ å®¡è®¡å­—æ®µ
ddl.append("  `create_by` varchar(50) DEFAULT NULL,\n");
ddl.append("  `create_at` datetime(3) DEFAULT CURRENT_TIMESTAMP(3),\n");
// ...

// ä¸»é”®å’Œç´¢å¼•
ddl.append("  PRIMARY KEY (`").append(primaryKey).append("`),\n");
ddl.append("  KEY `idx_update_at` (`update_at`)");
```

**ALTER TABLE ADD COLUMN**ï¼š
```java
StringBuilder ddl = new StringBuilder();
ddl.append("ALTER TABLE `").append(tableName).append("` ADD COLUMN ");
ddl.append(buildColumnDefinition(column));

// ä½ç½®æ§åˆ¶
if (index == 0) {
    ddl.append(" FIRST");
} else {
    ddl.append(" AFTER `").append(prevColumn.getColumnName()).append("`");
}
```

#### 3.3 å®¡è®¡å­—æ®µè¿‡æ»¤

```java
// å®¡è®¡å­—æ®µä¸å‚ä¸åŒæ­¥
Set<String> auditFields = Set.of(
    "create_by", "create_at", 
    "update_by", "update_at", 
    "valid"
);

List<String> existingColumns = queryColumns(tableName)
    .stream()
    .filter(col -> !auditFields.contains(col))
    .collect(Collectors.toList());
```

#### 3.4 ç”Ÿå‘½å‘¨æœŸé’©å­

**SysMatrixPortalService**ï¼š
```java
@Override
public void afterAdd(SysMatrix matrix) {
    // è‡ªåŠ¨åˆ›å»ºIDä¸»é”®å­—æ®µ
    SysMatrixColumn idColumn = new SysMatrixColumn();
    idColumn.setMatrixId(matrix.getId());
    idColumn.setColumnName("id");
    idColumn.setColumnType("BIGINT");
    idColumn.setIsPrimaryKey("1");
    idColumn.setSort(0);
    sysMatrixColumnService.save(idColumn);
}

@Override
public void beforeDelete(IdReqVO vo) {
    // æ£€æŸ¥è¡¨ä¸­æ˜¯å¦æœ‰æ•°æ®
    SysMatrix matrix = getById(vo.getId());
    if (hasTableData(matrix)) {
        throw new RuntimeException("è¡¨ä¸­å­˜åœ¨æ•°æ®ï¼Œæ— æ³•åˆ é™¤");
    }
}
```

**SysMatrixColumnPortalService**ï¼š
```java
@Override
public void beforeDelete(IdReqVO vo) {
    // æ£€æŸ¥å­—æ®µæ˜¯å¦æœ‰æ•°æ®
    SysMatrixColumn column = getById(vo.getId());
    if (hasColumnData(column)) {
        throw new RuntimeException("å­—æ®µä¸­å­˜åœ¨æ•°æ®ï¼Œæ— æ³•åˆ é™¤");
    }
}

@Override
public void afterAdd(SysMatrixColumn column) {
    // æ ‡è®°çŸ©é˜µä¸ºå¾…åŒæ­¥
    markPendingSync(column.getMatrixId());
}

@Override
public void afterUpdate(SysMatrixColumn column) {
    // æ ‡è®°çŸ©é˜µä¸ºå¾…åŒæ­¥
    markPendingSync(column.getMatrixId());
}

@Override
public void afterDelete(IdReqVO vo) {
    // æ ‡è®°çŸ©é˜µä¸ºå¾…åŒæ­¥
    SysMatrixColumn column = getById(vo.getId());
    markPendingSync(column.getMatrixId());
}
```

#### 3.5 è¡¨æ³¨é‡ŠåŒæ­¥æœºåˆ¶

**åŠŸèƒ½æè¿°**ï¼šå½“é€šè¿‡updateæ¥å£ä¿®æ”¹çŸ©é˜µçš„ `tableComment` å­—æ®µæ—¶ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨æ‰§è¡ŒDDLåŒæ­¥è¡¨æ³¨é‡Šåˆ°æ•°æ®åº“ã€‚

**å®ç°åŸç†**ï¼š

```java
// SysMatrixPortalService.afterUpdate()
@Override
public void afterUpdate(SysMatrix sysMatrix) {
    super.afterUpdate(sysMatrix);
    
    // è·å–æ›´æ–°å‰çš„æ•°æ®ï¼ˆä»ThreadLocalï¼‰
    SysMatrix oldMatrix = beforeUpdateMatrix.get();
    
    // æ£€æŸ¥è¡¨æ³¨é‡Šæ˜¯å¦å‘ç”Ÿå˜æ›´
    if (!Objects.equals(oldMatrix.getTableComment(), sysMatrix.getTableComment())) {
        // åªæœ‰å·²åˆ›å»ºçŠ¶æ€çš„è¡¨æ‰æ‰§è¡ŒDDL
        if (MatrixStatusDict.CREATED.getValue().equals(sysMatrix.getStatus()) ||
            MatrixStatusDict.SYNCED.getValue().equals(sysMatrix.getStatus()) ||
            MatrixStatusDict.PENDING_SYNC.getValue().equals(sysMatrix.getStatus())) {
            
            // æ‰§è¡ŒALTER TABLEä¿®æ”¹è¡¨æ³¨é‡Š
            executeModifyTableComment(sysMatrix);
        }
    }
}
```

**DDLè¯­å¥ç”Ÿæˆ**ï¼š

```java
private void executeModifyTableComment(SysMatrix matrix) {
    // æ„å»ºDDLè¯­å¥
    String ddl = "ALTER TABLE `" + matrix.getTableName() + "` COMMENT '" + 
                 matrix.getTableComment() + "'";
    
    // åˆ‡æ¢æ•°æ®æº
    if (matrix.getDataSource() != null && !matrix.getDataSource().isEmpty()) {
        jdbcConnectService.switchDataSource(matrix.getDataSource());
    }
    
    try {
        // æ‰§è¡ŒDDL
        jdbcConnectService.update(ddl, new HashMap<>());
        
        // è®°å½•å˜æ›´æ—¥å¿—
        logTableCommentChange(matrix, ddl);
        
    } finally {
        // é‡ç½®æ•°æ®æº
        if (matrix.getDataSource() != null && !matrix.getDataSource().isEmpty()) {
            jdbcConnectService.resetToDefaultDataSource();
        }
    }
}
```

**å˜æ›´æ—¥å¿—è®°å½•**ï¼š

```java
private void logTableCommentChange(SysMatrix matrix, String ddl) {
    // è·å–å½“å‰æœ€å¤§ç‰ˆæœ¬å·
    Integer maxVersion = getCurrentMaxVersion(matrix.getId());
    
    // åˆ›å»ºå˜æ›´æ—¥å¿—
    SysMatrixChangeLog log = new SysMatrixChangeLog();
    log.setMatrixId(matrix.getId());
    log.setVersion(maxVersion + 1);
    log.setChangeType(MatrixChangeTypeDict.MODIFY_TABLE_COMMENT.getValue());  // "7"
    log.setChangeDesc("ä¿®æ”¹è¡¨æ³¨é‡Š: " + matrix.getTableComment());
    log.setDdlStatement(ddl);
    log.setAffectedColumn(null);
    log.setExecuteStatus(CommonConst.YES);  // "1"
    log.setSort(maxVersion + 1);
    
    sysMatrixChangeLogService.save(log);
}
```

**ä½¿ç”¨ç¤ºä¾‹**ï¼š

```java
// åœºæ™¯ï¼šæ›´æ–°çŸ©é˜µè¡¨æ³¨é‡Š
SysMatrix matrix = sysMatrixService.getById(matrixId);
matrix.setTableComment("ç”¨æˆ·è¯„åˆ†è¡¨ï¼ˆå·²ä¼˜åŒ–ï¼‰");  // ä¿®æ”¹æ³¨é‡Š
sysMatrixService.updateById(matrix);

// ç³»ç»Ÿè‡ªåŠ¨æ‰§è¡Œï¼š
// 1. æ‰§è¡Œ DDL: ALTER TABLE `eval_user_score` COMMENT 'ç”¨æˆ·è¯„åˆ†è¡¨ï¼ˆå·²ä¼˜åŒ–ï¼‰'
// 2. è®°å½•å˜æ›´æ—¥å¿—ï¼ˆversioné€’å¢ï¼ŒchangeType=7ï¼‰
// 3. Traceæ—¥å¿—è¾“å‡ºSQLæ‰§è¡Œæƒ…å†µ
```

**æ—¥å¿—ç¤ºä¾‹**ï¼š

```log
2025-11-24 10:30:12.456 TRACE [JdbcConnectService] ==> æ›´æ–°SQL: ALTER TABLE `eval_user_score` COMMENT 'ç”¨æˆ·è¯„åˆ†è¡¨ï¼ˆå·²ä¼˜åŒ–ï¼‰'
2025-11-24 10:30:12.457 TRACE [JdbcConnectService] ==> å‚æ•°: {}
2025-11-24 10:30:12.489 TRACE [JdbcConnectService] <== å½±å“è¡Œæ•°: 0
2025-11-24 10:30:12.490 INFO  [SysMatrixPortalService] çŸ©é˜µ [eval_user_score] è¡¨æ³¨é‡Šå·²åŒæ­¥åˆ°æ•°æ®åº“
```

**æ³¨æ„äº‹é¡¹**ï¼š
- âœ… åªæœ‰å·²åˆ›å»ºçŠ¶æ€çš„è¡¨æ‰ä¼šæ‰§è¡ŒDDLåŒæ­¥
- âœ… æœªåˆ›å»ºçŠ¶æ€çš„è¡¨åªæ›´æ–°é…ç½®ï¼Œå»ºè¡¨æ—¶ä¼šä½¿ç”¨æ–°æ³¨é‡Š
- âœ… æ¯æ¬¡æ³¨é‡Šä¿®æ”¹éƒ½ä¼šç”Ÿæˆæ–°ç‰ˆæœ¬çš„å˜æ›´æ—¥å¿—
- âœ… æ³¨é‡Šä¸­çš„å•å¼•å·ä¼šè‡ªåŠ¨è½¬ä¹‰ä¸ºåŒå•å¼•å·
- âš ï¸ è¡¨æ³¨é‡Šé•¿åº¦ä¸è¶…è¿‡2048å­—ç¬¦ï¼ˆMySQLé™åˆ¶ï¼‰

---

## ä½¿ç”¨åœºæ™¯

### åœºæ™¯1ï¼šå¿«é€Ÿåˆ›å»ºä¸šåŠ¡è¡¨

**éœ€æ±‚**ï¼šåˆ›å»ºä¸€ä¸ªç”¨æˆ·è¯„ä¼°ä¿¡æ¯è¡¨

**æ­¥éª¤**ï¼š
1. åˆ›å»ºçŸ©é˜µ `eval_user_info`
2. é…ç½®å­—æ®µï¼šå§“åã€éƒ¨é—¨ã€è¯„ä¼°åˆ†æ•°ã€è¯„çº§
3. ç‚¹å‡»"åˆ›å»ºç‰©ç†è¡¨"
4. å®Œæˆ âœ…

**ä¼ ç»Ÿæ–¹å¼**ï¼šç¼–å†™SQLã€åˆ›å»ºEntityã€Mapperã€Serviceã€Controllerç­‰åå‡ ä¸ªæ–‡ä»¶  
**Forgeæ–¹å¼**ï¼š3åˆ†é’Ÿé…ç½®å®Œæˆ

---

### åœºæ™¯2ï¼šè¡¨å•å¿«é€Ÿè°ƒæ•´

**éœ€æ±‚**ï¼šä¸´æ—¶å¢åŠ ä¸€ä¸ª"è”ç³»ç”µè¯"å­—æ®µ

**æ­¥éª¤**ï¼š
1. åœ¨å­—æ®µé…ç½®ä¸­æ·»åŠ  `phone` å­—æ®µ
2. åœ¨è¡¨å•é…ç½®ä¸­è®¾ç½®æ˜¾ç¤ºæ ‡ç­¾å’ŒéªŒè¯è§„åˆ™
3. ç‚¹å‡»"åŒæ­¥è¡¨ç»“æ„"
4. å®Œæˆ âœ…

**ä¼ ç»Ÿæ–¹å¼**ï¼šä¿®æ”¹DDLã€Entityã€VOã€å‰ç«¯è¡¨å•ç­‰å¤šå¤„  
**Forgeæ–¹å¼**ï¼š1åˆ†é’Ÿé…ç½®å®Œæˆï¼Œæ— éœ€å‘ç‰ˆ

---

### åœºæ™¯3ï¼šå¤æ‚è”åŠ¨è®¡ç®—

**éœ€æ±‚**ï¼šå‘˜å·¥ç»©æ•ˆè‡ªåŠ¨è®¡ç®—æ€»åˆ†å’Œç­‰çº§

**é…ç½®**ï¼š
```javascript
// è”åŠ¨1ï¼šè®¡ç®—æ€»åˆ†
conditionScript: baseScore != null && bonusScore != null
actionScript: totalScore = baseScore + bonusScore

// è”åŠ¨2ï¼šåˆ¤æ–­ç­‰çº§
conditionScript: totalScore != null
actionScript: 
  if (totalScore >= 90) { level = 'A'; }
  else if (totalScore >= 80) { level = 'B'; }
  else if (totalScore >= 60) { level = 'C'; }
  else { level = 'D'; }
```

**ä¼ ç»Ÿæ–¹å¼**ï¼šå‰ç«¯JS + åç«¯JavaåŒé‡å®ç°  
**Forgeæ–¹å¼**ï¼š5åˆ†é’Ÿé…ç½®å®Œæˆï¼ŒæœåŠ¡ç«¯ç»Ÿä¸€è®¡ç®—

---

### åœºæ™¯4:å¤šç¯å¢ƒæ•°æ®éš”ç¦»

**éœ€æ±‚**:æµ‹è¯•ç¯å¢ƒå’Œç”Ÿäº§ç¯å¢ƒä½¿ç”¨ä¸åŒæ•°æ®åº“

**é…ç½®**:
```java
// æµ‹è¯•çŸ©é˜µ
matrix.dataSource = "test_db"

// ç”Ÿäº§çŸ©é˜µ
matrix.dataSource = "prod_db"
```

**æ•ˆæœ**:è‡ªåŠ¨åˆ‡æ¢æ•°æ®æº,æ•°æ®å®Œå…¨éš”ç¦»

---

### åœºæ™¯5:å¿«é€Ÿå¤åˆ¶è¡¨ç»“æ„

**éœ€æ±‚**:å°†æµ‹è¯•ç¯å¢ƒçš„è¡¨ç»“æ„è¿ç§»åˆ°ç”Ÿäº§ç¯å¢ƒ

**æ­¥éª¤**:
1. åœ¨æµ‹è¯•ç¯å¢ƒæ‰¾åˆ°ç›®æ ‡çŸ©é˜µ
2. ç‚¹å‡»â€œå¯¼å‡ºDDLâ€è·å–CREATE TABLEè¯­å¥
3. åˆ‡æ¢åˆ°ç”Ÿäº§ç¯å¢ƒ
4. ç‚¹å‡»â€œå¯¼å…¥DDLâ€ç²˜è´´è¯­å¥
5. è‡ªåŠ¨åˆ›å»ºçŸ©é˜µé…ç½®å’Œæ‰€æœ‰å­—æ®µ
6. å®Œæˆ âœ…

**ä¼ ç»Ÿæ–¹å¼**:æ‰‹åŠ¨é…ç½®å‡ åä¸ªå­—æ®µ,å®¹æ˜“å‡ºé”™  
**Forgeæ–¹å¼**:1åˆ†é’Ÿä¸€é”®è¿ç§»,å‡†ç¡®æ— è¯¯

---

### åœºæ™¯6:è·¨ç¯å¢ƒé…ç½®åŒæ­¥ï¼ˆé‡ç‚¹æ¨èï¼‰

**éœ€æ±‚**:åœ¨é¢„ç”Ÿäº§ç¯å¢ƒè¿›è¡Œè¡¨ç»“æ„è°ƒæ•´å’Œé…ç½®ï¼Œç„¶åä¸€é”®åŒæ­¥åˆ°ç”Ÿäº§ç¯å¢ƒ

**åœºæ™¯æè¿°**:
- é¢„ç”Ÿäº§ç¯å¢ƒå·²åˆ›å»ºçŸ©é˜µ `eval_user_score`ï¼Œç‰ˆæœ¬ä¸ºv1
- ç»è¿‡5æ¬¡è¿­ä»£ï¼Œå…±æ‰§è¡Œäº†20æ¬¡å˜æ›´ï¼Œå½“å‰ç‰ˆæœ¬v6
- éœ€è¦å°†è¿™äº›å˜æ›´åŒæ­¥åˆ°ç”Ÿäº§ç¯å¢ƒçš„åŒåè¡¨

**æ­¥éª¤**:

#### ç¬¬ä¸€æ­¥:é¢„ç”Ÿäº§ç¯å¢ƒå¯¼å‡ºå˜æ›´æ—¥å¿—
```
1. æ‰¾åˆ°çŸ©é˜µ eval_user_score
2. åœ¨å˜æ›´æ—¥å¿—ç®¡ç†é¡µé¢,ç‚¹å‡»"å¯¼å‡ºå˜æ›´æ—¥å¿—"
3. ç³»ç»Ÿè¿”å›JSONæ•°æ®ï¼š
   - çŸ©é˜µåŸºæœ¬ä¿¡æ¯ï¼ˆè¡¨åã€æ³¨é‡Šã€æ•°æ®æºç­‰ï¼‰
   - å…¨éƒ¨å˜æ›´æ—¥å¿—ï¼ˆv1-v6ï¼Œå…±20æ¡è®°å½•ï¼‰
   - å½“å‰å­—æ®µé…ç½®
4. å¤åˆ¶JSONæ•°æ®
```

**æ¥å£**: `GET /web/forge/matrix-changelog/export-changelog?id={matrixId}`  
**Controller**: `SysMatrixChangeLogPortalController.exportChangeLog()`

**å¯¼å‡ºJSONç¤ºä¾‹**:
```json
{
  "tableName": "eval_user_score",
  "tableComment": "ç”¨æˆ·è¯„åˆ†è¡¨",
  "dataSource": null,
  "engine": "InnoDB",
  "charset": "utf8mb4",
  "changeLogs": [
    {
      "version": 1,
      "changeType": "1",
      "changeDesc": "åˆ›å»ºè¡¨ eval_user_score",
      "ddlStatement": "CREATE TABLE `eval_user_score` (...)",
      "affectedColumn": null
    },
    {
      "version": 2,
      "changeType": "2",
      "changeDesc": "æ·»åŠ å­—æ®µ total_score",
      "ddlStatement": "ALTER TABLE `eval_user_score` ADD COLUMN `total_score` DECIMAL(10,2) ...",
      "affectedColumn": "total_score"
    },
    // ... æ›´å¤šå˜æ›´è®°å½•
  ],
  "columns": [
    {
      "columnName": "id",
      "columnComment": "ä¸»é”®ID",
      "columnType": "BIGINT",
      "isPrimaryKey": "1",
      // ... å…¶ä»–å­—æ®µé…ç½®
    },
    // ... æ›´å¤šå­—æ®µ
  ]
}
```

#### ç¬¬äºŒæ­¥:ç”Ÿäº§ç¯å¢ƒå‡†å¤‡
```
1. ç™»å½•ç”Ÿäº§ç¯å¢ƒ
2. ç¡®ä¿å·²å­˜åœ¨åŒåçŸ©é˜µ eval_user_score
3. æ£€æŸ¥çŸ©é˜µçŠ¶æ€ï¼šå¿…é¡»æ˜¯â€œå·²åˆ›å»ºâ€æˆ–â€œå·²åŒæ­¥â€
4. å¤‡ä»½ç”Ÿäº§æ•°æ®åº“ï¼ˆé‡è¦ï¼ï¼‰
```

#### ç¬¬ä¸‰æ­¥:å¯¼å…¥å˜æ›´æ—¥å¿—
```
1. åœ¨å˜æ›´æ—¥å¿—ç®¡ç†é¡µé¢,ç‚¹å‡»"å¯¼å…¥å˜æ›´æ—¥å¿—"
2. ç²˜è´´é¢„ç”Ÿäº§ç¯å¢ƒå¯¼å‡ºçš„JSONæ•°æ®
3. ç‚¹å‡»ç¡®è®¤
```

**æ¥å£**: `POST /web/forge/matrix-changelog/import-changelog`  
**Controller**: `SysMatrixChangeLogPortalController.importChangeLog()`

#### ç³»ç»Ÿè‡ªåŠ¨æ‰§è¡Œçš„æ“ä½œ:
```
1. è§£æJSONæ•°æ®
2. æ ¹æ®è¡¨åæŸ¥æ‰¾ç”Ÿäº§ç¯å¢ƒçš„çŸ©é˜µ
3. è·å–ç”Ÿäº§ç¯å¢ƒå½“å‰æœ€å¤§ç‰ˆæœ¬å·ï¼ˆå¦‚v3ï¼‰
4. ç­›é€‰å‡ºéœ€è¦æ‰§è¡Œçš„å˜æ›´ï¼ˆv4-v6çš„è®°å½•ï¼‰
5. é€æ¡æ‰§è¡ŒDDLè¯­å¥ï¼š
   - è·³è¿‡CREATE TABLEï¼ˆè¡¨å·²å­˜åœ¨ï¼‰
   - æ‰§è¡ŒADD COLUMN
   - æ‰§è¡ŒMODIFY COLUMN
   - æ‰§è¡ŒADD INDEX
   - æ‰§è¡ŒDROP COLUMN
6. åŒæ­¥å­—æ®µé…ç½®ï¼š
   - æ–°å¢ä¸å­˜åœ¨çš„å­—æ®µé…ç½®
   - æ›´æ–°å·²å­˜åœ¨çš„å­—æ®µé…ç½®
   - åˆ é™¤å¤šä½™çš„å­—æ®µé…ç½®
7. è®°å½•æ‰€æœ‰å˜æ›´æ—¥å¿—åˆ°ç”Ÿäº§ç¯å¢ƒ
8. æ›´æ–°çŸ©é˜µçŠ¶æ€ä¸ºâ€œå·²åŒæ­¥â€
```

#### æ‰§è¡Œç»“æœ:
```
âœ… ç”Ÿäº§ç¯å¢ƒç‰©ç†è¡¨ç»“æ„ä¸é¢„ç”Ÿäº§ç¯å¢ƒå®Œå…¨ä¸€è‡´
âœ… ç”Ÿäº§ç¯å¢ƒå­—æ®µé…ç½®ä¸é¢„ç”Ÿäº§ç¯å¢ƒå®Œå…¨ä¸€è‡´
âœ… ç”Ÿäº§ç¯å¢ƒå˜æ›´æ—¥å¿—åŒ…å«æ‰€æœ‰å˜æ›´å†å²
âœ… ç”Ÿäº§ç¯å¢ƒçŸ©é˜µç‰ˆæœ¬å·æ›´æ–°ä¸ºv6
âœ… åŸæœ‰ç”Ÿäº§æ•°æ®å®Œå¥½æ— æŸ
```

**ä¼˜åŠ¿å¯¹æ¯”**:

| æ–¹é¢ | ä¼ ç»Ÿæ–¹å¼ | Forgeå˜æ›´æ—¥å¿—åŒæ­¥ |
|------|---------|------------------|
| æ“ä½œå¤æ‚åº¦ | é«˜ï¼ˆæ‰‹åŠ¨æ‰§è¡Œæ¯æ¡DDLï¼‰ | ä½ï¼ˆä¸€é”®å¯¼å…¥ï¼‰ |
| å‡ºé”™é£é™© | é«˜ï¼ˆSQLé¡ºåºé”™è¯¯ã€æ¼æ‰§è¡Œï¼‰ | ä½ï¼ˆè‡ªåŠ¨æŒ‰ç‰ˆæœ¬æ‰§è¡Œï¼‰ |
| é…ç½®åŒæ­¥ | éœ€æ‰‹åŠ¨åŒæ­¥ | è‡ªåŠ¨åŒæ­¥ |
| å˜æ›´è¿½æº¯ | éš¾ï¼ˆéœ€æ‰‹åŠ¨è®°å½•ï¼‰ | æ˜“ï¼ˆå®Œæ•´å†å²ï¼‰ |
| æ—¶é—´æˆæœ¬ | 30åˆ†é’Ÿ+ | 2åˆ†é’Ÿ |
| å›æ»šéš¾åº¦ | é«˜ | ä¸­ï¼ˆæœ‰å†å²è®°å½•ï¼‰ |

**æ³¨æ„äº‹é¡¹**:
- âš ï¸ å¯¼å…¥å‰å¿…é¡»å¤‡ä»½ç”Ÿäº§æ•°æ®åº“
- âš ï¸ ç›®æ ‡ç¯å¢ƒå¿…é¡»å·²å­˜åœ¨åŒåçŸ©é˜µ
- âš ï¸ å»ºè®®åœ¨ä¸šåŠ¡ä½å³°æœŸæ‰§è¡Œ
- âœ… ç³»ç»Ÿä¼šè‡ªåŠ¨è·³è¿‡å·²æ‰§è¡Œçš„ç‰ˆæœ¬
- âœ… æŸäº›å¤±è´¥ï¼ˆå¦‚ç´¢å¼•å·²å­˜åœ¨ï¼‰ä¼šè‡ªåŠ¨å¿½ç•¥

---

## æœ€ä½³å®è·µ

### 1. è¡¨è®¾è®¡è§„èŒƒ

âœ… **æ¨è**ï¼š
- è¡¨åä½¿ç”¨ `ä¸šåŠ¡æ¨¡å—_åŠŸèƒ½` æ ¼å¼ï¼Œå¦‚ `eval_user_score`
- å­—æ®µåä½¿ç”¨ä¸‹åˆ’çº¿å‘½åï¼Œå¦‚ `user_name`
- å¿…é¡»æœ‰ä¸»é”®ï¼Œæ¨èä½¿ç”¨è‡ªå¢BIGINT
- å¸¸ç”¨æŸ¥è¯¢å­—æ®µæ·»åŠ ç´¢å¼•
- å­—ç¬¦ä¸²å­—æ®µåˆç†è®¾ç½®é•¿åº¦

âŒ **ä¸æ¨è**ï¼š
- ä½¿ç”¨MySQLä¿ç•™å­—ä½œä¸ºè¡¨å/å­—æ®µå
- è¿‡é•¿çš„è¡¨åæˆ–å­—æ®µåï¼ˆè¶…è¿‡30å­—ç¬¦ï¼‰
- æ‰€æœ‰å­—æ®µéƒ½å»ºç´¢å¼•ï¼ˆæµªè´¹ç©ºé—´ï¼‰
- VARCHARä¸è®¾ç½®é•¿åº¦

### 2. å­—æ®µé…ç½®å»ºè®®

| ä¸šåŠ¡ç±»å‹ | æ¨èé…ç½® |
|---------|---------|
| ä¸»é”®ID | BIGINT(20), AUTO_INCREMENT |
| ç”¨æˆ·å§“å | VARCHAR(50), ç´¢å¼• |
| æ‰‹æœºå· | VARCHAR(11), å”¯ä¸€ç´¢å¼• |
| èº«ä»½è¯å· | VARCHAR(18), å”¯ä¸€ç´¢å¼• |
| é‚®ç®± | VARCHAR(100), å”¯ä¸€ç´¢å¼• |
| é‡‘é¢ | DECIMAL(19,2) |
| ç™¾åˆ†æ¯” | DECIMAL(5,2) |
| çŠ¶æ€æ ‡è¯† | VARCHAR(10) æˆ– CHAR(1) |
| é•¿æ–‡æœ¬ | TEXT |
| æ—¥æœŸæ—¶é—´ | DATETIME |

### 3. ç´¢å¼•ä¼˜åŒ–å»ºè®®

âœ… **åº”è¯¥æ·»åŠ ç´¢å¼•çš„å­—æ®µ**ï¼š
- ä¸»é”®å­—æ®µï¼ˆè‡ªåŠ¨åˆ›å»ºï¼‰
- å¤–é”®å­—æ®µ
- ç»å¸¸ç”¨äºWHEREæ¡ä»¶çš„å­—æ®µ
- ç»å¸¸ç”¨äºORDER BYçš„å­—æ®µ
- ç»å¸¸ç”¨äºJOINçš„å­—æ®µ

âŒ **ä¸åº”è¯¥æ·»åŠ ç´¢å¼•çš„å­—æ®µ**ï¼š
- TEXT/BLOBç­‰å¤§å­—æ®µ
- æ›´æ–°é¢‘ç¹çš„å­—æ®µ
- åŒºåˆ†åº¦å¾ˆä½çš„å­—æ®µï¼ˆå¦‚æ€§åˆ«ï¼‰
- è¡¨æ•°æ®é‡å¾ˆå°ï¼ˆ<1000è¡Œï¼‰

### 4. è¡¨ç»“æ„å˜æ›´æµç¨‹

**å®‰å…¨çš„å˜æ›´æµç¨‹**ï¼š
```
1. åœ¨æµ‹è¯•ç¯å¢ƒé…ç½®å¹¶æµ‹è¯•
   â†“
2. éªŒè¯åŒæ­¥åŠŸèƒ½æ­£å¸¸
   â†“
3. å¤‡ä»½ç”Ÿäº§æ•°æ®åº“
   â†“
4. é€‰æ‹©ä¸šåŠ¡ä½å³°æœŸ
   â†“
5. æ‰§è¡Œè¡¨ç»“æ„åŒæ­¥
   â†“
6. éªŒè¯æ•°æ®å®Œæ•´æ€§
   â†“
7. ç›‘æ§ç³»ç»Ÿè¿è¡Œ
```

**é«˜å±æ“ä½œæ³¨æ„**ï¼š
- âš ï¸ è°ƒæ•´å­—æ®µé¡ºåºä¼šé”è¡¨ï¼Œå¤§è¡¨æ…ç”¨
- âš ï¸ æ·»åŠ å”¯ä¸€ç´¢å¼•å‰æ£€æŸ¥æ•°æ®æ˜¯å¦æœ‰é‡å¤
- âš ï¸ åˆ é™¤å­—æ®µå‰ç¡®è®¤æ•°æ®å·²è¿ç§»æˆ–æ— ç”¨

### 5. æ€§èƒ½ä¼˜åŒ–å»ºè®®

**å¤§è¡¨æ“ä½œ**ï¼š
- åœ¨ä½å³°æœŸæ‰§è¡ŒDDLæ“ä½œ
- è€ƒè™‘ä½¿ç”¨pt-online-schema-changeç­‰å·¥å…·
- æå‰è¯„ä¼°é”è¡¨æ—¶é—´

**ç´¢å¼•ç­–ç•¥**ï¼š
- ä¼˜å…ˆä½¿ç”¨è¦†ç›–ç´¢å¼•
- é¿å…è¿‡å¤šçš„å¤åˆç´¢å¼•
- å®šæœŸåˆ†æç´¢å¼•ä½¿ç”¨æƒ…å†µ

**æ•°æ®æŸ¥è¯¢**ï¼š
- å–„ç”¨æ¡ä»¶æŸ¥è¯¢å‡å°‘æ•°æ®é‡
- å¤§æ•°æ®é‡ä½¿ç”¨åˆ†é¡µ
- é¿å…SELECT *

---

## å¸¸è§é—®é¢˜

### Q1ï¼šåˆ›å»ºè¡¨æ—¶æç¤º"è¡¨å·²å­˜åœ¨"ï¼Ÿ
**A**ï¼šæ£€æŸ¥æ•°æ®åº“ä¸­æ˜¯å¦å·²æœ‰åŒåè¡¨ã€‚å¦‚æœæ˜¯è½¯åˆ é™¤çš„çŸ©é˜µï¼Œå¯ä»¥é‡æ–°å¯ç”¨ï¼›å¦‚æœæ˜¯æ‰‹åŠ¨åˆ›å»ºçš„è¡¨ï¼Œéœ€è¦å…ˆåˆ é™¤æˆ–æ”¹åã€‚

### Q2ï¼šåŒæ­¥è¡¨ç»“æ„æ—¶æç¤º"è¡¨æœªåˆ›å»º"ï¼Ÿ
**A**ï¼šçŸ©é˜µçŠ¶æ€å¿…é¡»ä¸º"å·²åˆ›å»º"ã€"å·²åŒæ­¥"æˆ–"å¾…åŒæ­¥"ã€‚å¦‚æœæ˜¯æ–°çŸ©é˜µï¼Œå…ˆç‚¹å‡»"åˆ›å»ºç‰©ç†è¡¨"ã€‚

### Q3ï¼šå­—æ®µé¡ºåºè°ƒæ•´åï¼Œå‰ç«¯æ˜¾ç¤ºé¡ºåºä¸å¯¹ï¼Ÿ
**A**ï¼š
1. æ£€æŸ¥æ˜¯å¦æ‰§è¡Œäº†"åŒæ­¥è¡¨ç»“æ„"
2. å‰ç«¯éœ€è¦æŒ‰ç…§ `sort` å­—æ®µæ’åºæ˜¾ç¤º
3. æ¸…é™¤æµè§ˆå™¨ç¼“å­˜é‡æ–°åŠ è½½

### Q4ï¼šè”åŠ¨è„šæœ¬ä¸ç”Ÿæ•ˆï¼Ÿ
**A**ï¼š
1. æ£€æŸ¥ `isEnabled` æ˜¯å¦ä¸º"1"
2. æ£€æŸ¥ `conditionScript` æ˜¯å¦æ»¡è¶³
3. æŸ¥çœ‹åå°æ—¥å¿—æ˜¯å¦æœ‰è„šæœ¬é”™è¯¯
4. ç¡®è®¤ `targetFields` é…ç½®æ­£ç¡®

### Q5ï¼šåˆ é™¤å­—æ®µæ—¶æç¤º"å­—æ®µä¸­å­˜åœ¨æ•°æ®"ï¼Ÿ
**A**ï¼šè¿™æ˜¯å®‰å…¨ä¿æŠ¤æœºåˆ¶ã€‚å¦‚éœ€åˆ é™¤ï¼š
1. ç¡®è®¤æ•°æ®å¯ä»¥ä¸¢å¼ƒ
2. æ‰‹åŠ¨æ¸…ç©ºè¯¥å­—æ®µæ•°æ®ï¼š`UPDATE table SET field = NULL`
3. é‡æ–°åˆ é™¤å­—æ®µé…ç½®

### Q6ï¼šèƒ½å¦ä¿®æ”¹å·²åˆ›å»ºè¡¨çš„å­—æ®µç±»å‹ï¼Ÿ
**A**ï¼šå½“å‰ç‰ˆæœ¬ä¸æ”¯æŒã€‚éœ€è¦ï¼š
1. åˆ›å»ºæ–°å­—æ®µ
2. è¿ç§»æ•°æ®
3. åˆ é™¤æ—§å­—æ®µ

### Q7ï¼šå¦‚ä½•åˆ é™¤æ•´ä¸ªçŸ©é˜µï¼Ÿ
**A**ï¼š
1. å¿…é¡»å…ˆæ¸…ç©ºè¡¨æ•°æ®ï¼ˆè¶…çº§ç®¡ç†å‘˜ä½¿ç”¨"æ¸…ç©ºæ•°æ®"åŠŸèƒ½ï¼‰
2. åˆ é™¤çŸ©é˜µé…ç½®
3. ç‰©ç†è¡¨ä»ä¿ç•™ï¼Œéœ€æ‰‹åŠ¨DROP TABLE

### Q8ï¼šå¤šæ•°æ®æºå¦‚ä½•é…ç½®ï¼Ÿ
**A**ï¼š
1. åœ¨æ•°æ®æºé…ç½®ä¸­æ·»åŠ æ–°æ•°æ®æº
2. çŸ©é˜µé…ç½®ä¸­ `dataSource` å­—æ®µå¡«å†™æ•°æ®æºåç§°
3. æ‰€æœ‰æ“ä½œè‡ªåŠ¨åˆ‡æ¢åˆ°æŒ‡å®šæ•°æ®æº

### Q9ï¼šå¦‚ä½•å®ç°å­—æ®µçº§æƒé™æ§åˆ¶ï¼Ÿ
**A**ï¼šåœ¨è¡¨å•é…ç½®ä¸­ï¼š
- `readonly="1"` - åªè¯»
- `hidden="1"` - éšè—
- ç»“åˆç”¨æˆ·è§’è‰²åŠ¨æ€æ§åˆ¶

### Q10:è¡¨ç»“æ„åŒæ­¥ä¼šå½±å“ç°æœ‰æ•°æ®å—?
**A**:ä¸ä¼š!åŒæ­¥æ“ä½œ:
- âœ… åªæ·»åŠ æ–°å­—æ®µ
- âœ… åªè°ƒæ•´å­—æ®µä½ç½®
- âœ… åªç®¡ç†ç´¢å¼•
- âŒ ä¸ä¿®æ”¹å­—æ®µç±»å‹
- âŒ ä¸åˆ é™¤æ•°æ®

### Q11:DDLå¯¼å‡ºå¯¼å…¥æœ‰ä»€ä¹ˆé™åˆ¶?
**A**:
- âœ… æ”¯æŒæ ‡å‡†MySQL CREATE TABLEè¯­æ³•
- âœ… è‡ªåŠ¨è§£æå­—æ®µç±»å‹ã€é•¿åº¦ã€æ³¨é‡Š
- âœ… è‡ªåŠ¨è¯†åˆ«ä¸»é”®ã€ç´¢å¼•ã€å”¯ä¸€ç´¢å¼•
- âš ï¸ ä¸æ”¯æŒå¤–é”®çº¦æŸ
- âš ï¸ ä¸æ”¯æŒåˆ†åŒºè¡¨
- âš ï¸ å¯¼å…¥æ—¶ä¼šåˆ›å»ºæ–°çŸ©é˜µ,ä¸ä¼šè¦†ç›–ç°æœ‰é…ç½®

### Q12:å¦‚ä½•æ‰¹é‡è¿ç§»å¤šä¸ªè¡¨?
**A**:
1. é€ä¸ªå¯¼å‡ºDDLè¯­å¥
2. ä¿å­˜åˆ°æ–‡æœ¬æ–‡ä»¶
3. åœ¨ç›®æ ‡ç¯å¢ƒé€ä¸ªå¯¼å…¥
4. éªŒè¯é…ç½®æ­£ç¡®æ€§
5. åˆ›å»ºç‰©ç†è¡¨

### Q13:è·¨ç¯å¢ƒåŒæ­¥å¤±è´¥æ€ä¹ˆåŠï¼Ÿ
**A**:
1. æŸ¥çœ‹é”™è¯¯ä¿¡æ¯ï¼Œç¡®å®šå¤±è´¥åŸå› 
2. æ£€æŸ¥ç›®æ ‡ç¯å¢ƒæ˜¯å¦å­˜åœ¨åŒåçŸ©é˜µ
3. ç¡®è®¤ç›®æ ‡çŸ©é˜µçŠ¶æ€æ˜¯å¦æ­£ç¡®ï¼ˆå·²åˆ›å»º/å·²åŒæ­¥ï¼‰
4. æ£€æŸ¥æ˜¯å¦æœ‰æƒé™æ‰§è¡ŒDDLè¯­å¥
5. æŸ¥çœ‹å˜æ›´æ—¥å¿—è¡¨ï¼Œç¡®è®¤å“ªäº›å˜æ›´å·²æ‰§è¡Œ
6. å¿…è¦æ—¶ä»å¤‡ä»½æ¢å¤

### Q14:å¦‚ä½•å›æ»šè·¨ç¯å¢ƒåŒæ­¥ï¼Ÿ
**A**:
å½“å‰ç‰ˆæœ¬ä¸æ”¯æŒè‡ªåŠ¨å›æ»šã€‚å¦‚éœ€å›æ»šï¼š
1. ä»æ•°æ®åº“å¤‡ä»½æ¢å¤
2. æˆ–æ‰‹åŠ¨æ‰§è¡Œåå‘DDLï¼ˆå¦‚DROP COLUMNã€DROP INDEXï¼‰
3. åˆ é™¤ç›¸åº”çš„å˜æ›´æ—¥å¿—è®°å½•
4. æ›´æ–°çŸ©é˜µç‰ˆæœ¬å·

### Q15:è·¨ç¯å¢ƒåŒæ­¥å’ŒDDLå¯¼å…¥æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ
**A**:

| åŠŸèƒ½ | DDLå¯¼å…¥ | è·¨ç¯å¢ƒåŒæ­¥ |
|------|---------|-------------|
| ä½¿ç”¨åœºæ™¯ | åˆ›å»ºæ–°çŸ©é˜µ | åŒæ­¥ç°æœ‰çŸ©é˜µ |
| ç›®æ ‡è¡¨ | ä¸å­˜åœ¨ | å·²å­˜åœ¨ |
| å¯¼å…¥å†…å®¹ | DDLè¯­å¥ | å˜æ›´æ—¥å¿—+é…ç½® |
| ç‰ˆæœ¬ç®¡ç† | æ—  | æœ‰ï¼ˆå¢é‡åŒæ­¥ï¼‰ |
| é…ç½®åŒæ­¥ | å¦ | æ˜¯ |
| å˜æ›´å†å² | ä¸ä¿ç•™ | å®Œæ•´ä¿ç•™ |

**æ€»ç»“**:
- DDLå¯¼å…¥ï¼šç”¨äºå¿«é€Ÿåˆ›å»ºæ–°è¡¨
- è·¨ç¯å¢ƒåŒæ­¥ï¼šç”¨äºç°æœ‰è¡¨çš„é…ç½®å’Œç»“æ„åŒæ­¥

### Q16:è·¨ç¯å¢ƒåŒæ­¥ä¼šåˆ é™¤æ•°æ®å—ï¼Ÿ
**A**:
ä¸ä¼šï¼è·¨ç¯å¢ƒåŒæ­¥åªå¤„ç†è¡¨ç»“æ„ï¼š
- âœ… æ·»åŠ å­—æ®µï¼ˆåŸæœ‰æ•°æ®ä¿ç•™ï¼‰
- âœ… è°ƒæ•´å­—æ®µä½ç½®ï¼ˆåŸæœ‰æ•°æ®ä¿ç•™ï¼‰
- âœ… ç®¡ç†ç´¢å¼•ï¼ˆä¸å½±å“æ•°æ®ï¼‰
- âœ… åˆ é™¤å­—æ®µï¼ˆä¼šåˆ é™¤è¯¥å­—æ®µæ•°æ®ï¼‰
- âŒ ä¸ä¼šTRUNCATEè¡¨
- âŒ ä¸ä¼šDELETEæ•°æ®

**é‡è¦æé†’**:åˆ é™¤å­—æ®µä¼šå¯¼è‡´è¯¥å­—æ®µæ•°æ®ä¸¢å¤±ï¼Œè¯·æå‰å¤‡ä»½ï¼

---

## ç‰ˆæœ¬å†å²

### v1.1.0 (2025-11-23)
**æ–°å¢åŠŸèƒ½**:
- âœ¨ è·¨ç¯å¢ƒé…ç½®åŒæ­¥ï¼ˆé‡ç‚¹åŠŸèƒ½ï¼‰
  - å¯¼å‡ºçŸ©é˜µå˜æ›´æ—¥å¿—
  - å¯¼å…¥å˜æ›´æ—¥å¿—å¹¶è‡ªåŠ¨åŒæ­¥
  - ç‰ˆæœ¬å¢é‡åŒæ­¥ï¼Œåªæ‰§è¡ŒæœªåŒæ­¥çš„å˜æ›´
  - è‡ªåŠ¨åŒæ­¥å­—æ®µé…ç½®
  - å®Œæ•´çš„å˜æ›´å†å²è¿½æº¯

**ä½¿ç”¨åœºæ™¯**:
- é¢„ç”Ÿäº§ç¯å¢ƒé…ç½®åŒæ­¥åˆ°ç”Ÿäº§ç¯å¢ƒ
- æµ‹è¯•ç¯å¢ƒé…ç½®åŒæ­¥åˆ°é¢„ç”Ÿäº§ç¯å¢ƒ
- å¤šç¯å¢ƒä¸€è‡´æ€§ä¿è¯
- è¿­ä»£å¼è¡¨ç»“æ„è°ƒæ•´

**æŠ€æœ¯å®ç°**:
- åŸºäºJSONå¯¼å‡º/å¯¼å…¥
- æ™ºèƒ½ç‰ˆæœ¬å¯¹æ¯”
- è‡ªåŠ¨DDLæ‰§è¡Œ
- é…ç½®è‡ªåŠ¨åŒæ­¥
- é”™è¯¯å®¹é”™å¤„ç†

---

### v1.0.0 (2025-11-20)
**æ ¸å¿ƒåŠŸèƒ½**:
- âœ… çŸ©é˜µç®¡ç†(åˆ›å»ºã€åŒæ­¥ã€åˆ é™¤)
- âœ… å­—æ®µé…ç½®(18ç§å­—æ®µç±»å‹)
- âœ… è¡¨å•é…ç½®(å¯è§†åŒ–å¸ƒå±€)
- âœ… è”åŠ¨é…ç½®(JavaScriptè„šæœ¬)
- âœ… æ•°æ®æ“ä½œ(CRUDæ¥å£)
- âœ… å˜æ›´æ—¥å¿—(å®Œæ•´è¿½è¸ª)
- âœ… DDLå¯¼å…¥å¯¼å‡º(å¿«é€Ÿè¿ç§»)

**ç‰¹æ€§**:
- âœ… è‡ªåŠ¨åˆ›å»ºå®¡è®¡å­—æ®µ
- âœ… è‡ªåŠ¨åˆ›å»ºIDä¸»é”®
- âœ… æ”¯æŒåºåˆ—ä¸»é”®
- âœ… ç´¢å¼•è‡ªåŠ¨ç®¡ç†
- âœ… å­—æ®µé¡ºåºè°ƒæ•´
- âœ… åˆ é™¤å‰æ•°æ®æ£€æŸ¥
- âœ… å¤šæ•°æ®æºæ”¯æŒ
- âœ… çŠ¶æ€è‡ªåŠ¨æµè½¬
- âœ… è½¯åˆ é™¤æ”¯æŒ
- âœ… è¶…çº§ç®¡ç†å‘˜æ¸…ç©ºæ•°æ®
- âœ… DDLè¯­å¥æ™ºèƒ½è§£æ
- âœ… è·¨ç¯å¢ƒè¡¨ç»“æ„è¿ç§»

---

## æ‰©å±•è§„åˆ’

### çŸ­æœŸè®¡åˆ’ï¼ˆv1.1ï¼‰
- [ ] å­—æ®µç±»å‹ä¿®æ”¹æ”¯æŒ
- [ ] æ‰¹é‡å¯¼å…¥æ•°æ®
- [ ] æ•°æ®å¯¼å‡ºExcel
- [ ] è¡¨å•æ¨¡æ¿åº“
- [ ] å¸¸ç”¨è”åŠ¨è„šæœ¬åº“

### ä¸­æœŸè®¡åˆ’ï¼ˆv1.2ï¼‰
- [ ] å¯è§†åŒ–è¡¨å•è®¾è®¡å™¨
- [ ] å­—æ®µçº§æƒé™æ§åˆ¶
- [ ] æ•°æ®ç‰ˆæœ¬ç®¡ç†
- [ ] å®¡æ‰¹æµç¨‹é…ç½®
- [ ] ç§»åŠ¨ç«¯è¡¨å•é€‚é…

### é•¿æœŸè®¡åˆ’ï¼ˆv2.0ï¼‰
- [ ] å¤šè¡¨å…³è”æŸ¥è¯¢
- [ ] å¤æ‚æŠ¥è¡¨é…ç½®
- [ ] å·¥ä½œæµå¼•æ“
- [ ] BIæ•°æ®åˆ†æ
- [ ] AIæ™ºèƒ½æ¨è

---

## ç›¸å…³æ–‡æ¡£

- [åŠ¨æ€çŸ©é˜µé…ç½®APIæ–‡æ¡£](./åŠ¨æ€çŸ©é˜µé…ç½®APIæ–‡æ¡£.md) - å‰ç«¯å¯¹æ¥å®Œæ•´æŒ‡å—
- [SQLä»£ç ç”ŸæˆæŒ‡å—](../doc/SQLä»£ç ç”ŸæˆæŒ‡å—.md) - æ•°æ®åº“è®¾è®¡å‚è€ƒ

---

## æŠ€æœ¯æ”¯æŒ

**å¼€å‘å›¢é˜Ÿ**ï¼šForge Team  
**æ¨¡å—ä½ç½®**ï¼š`core/forge`  
**è”ç³»æ–¹å¼**ï¼šè¯·é€šè¿‡é¡¹ç›®Issueåé¦ˆé—®é¢˜

---

*æœ€åæ›´æ–°:2025-11-22*
